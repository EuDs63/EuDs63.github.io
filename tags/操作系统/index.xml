<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>æ“ä½œç³»ç»Ÿ on EuDs&#39;s Blog</title>
    <link>https://euds63.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/</link>
    <description>Recent content in æ“ä½œç³»ç»Ÿ on EuDs&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Tue, 27 Jun 2023 18:37:47 +0800</lastBuildDate><atom:link href="https://euds63.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ã€Šæ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸å®ç°ã€‹ç¬”è®°</title>
      <link>https://euds63.github.io/2023/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Tue, 27 Jun 2023 18:37:47 +0800</pubDate>
      
      <guid>https://euds63.github.io/2023/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%AC%94%E8%AE%B0/</guid>
      <description>æ“ä½œç³»ç»Ÿå°±æ˜¯çŠ¶æ€æœº</description>
      <content:encoded><![CDATA[<p><strong><a href="https://space.bilibili.com/202224425/channel/collectiondetail?sid=192498"  target="_blank" rel="noopener" >æ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸å®ç° (2022 æ˜¥å­£å­¦æœŸ)</a>çš„å­¦ä¹ ç¬”è®°</strong></p>
<h3 id="p3-å¤šå¤„ç†å™¨ç¼–ç¨‹ä»å…¥é—¨åˆ°æ”¾å¼ƒ-çº¿ç¨‹åº“ç°ä»£å¤„ç†å™¨å’Œå®½æ¾å†…å­˜æ¨¡å‹">p3 å¤šå¤„ç†å™¨ç¼–ç¨‹ï¼šä»å…¥é—¨åˆ°æ”¾å¼ƒ (çº¿ç¨‹åº“ï¼›ç°ä»£å¤„ç†å™¨å’Œå®½æ¾å†…å­˜æ¨¡å‹)</h3>
<ul>
<li>
<p>å¹¶å‘ç¨‹åºçš„ä¸‰ä¸ªéº»çƒ¦</p>
<ul>
<li>åŸå­æ€§</li>
<li>é¡ºåº</li>
<li>å¯è§æ€§</li>
</ul>
</li>
<li>
<p>gcc ç¼–è¯‘</p>
<ul>
<li>ä¸ä¼˜åŒ–,å¹¶æŸ¥çœ‹æ±‡ç¼–ä»£ç 
<code>gcc -c -O1 sum.c &amp;&amp; objdump -d sum.o</code></li>
<li><code>asm volatile(&quot;&quot; : : &quot;memory&quot;); // compiler barrier</code></li>
</ul>
</li>
<li>
<p>ç»Ÿè®¡æ¬¡æ•°
<code> ./a.out | head -n 1000 | sort | uniq -c</code></p>
</li>
<li>
<p>ç°ä»£å¤„ç†å™¨</p>
<ul>
<li>ä¹Ÿæ˜¯åŠ¨æ€ç¼–è¯‘å™¨ï¼šæ±‡ç¼–æŒ‡ä»¤ä¹Ÿæ˜¯ç”±å¤šä¸ªuopæ‰€ç»„æˆçš„ã€‚</li>
<li>ç»´æŠ¤ä¸€ä¸ªuopçš„â€œæ± å­â€ æŒ‡ä»¤çš„æœ‰å‘æ— ç¯å›¾</li>
<li>ä¹±åºæ‰§è¡Œï¼Œé¡ºåºæäº¤</li>
</ul>
</li>
</ul>
<h3 id="p4-ç†è§£å¹¶å‘ç¨‹åºæ‰§è¡Œ-petersonç®—æ³•æ¨¡å‹æ£€éªŒä¸è½¯ä»¶è‡ªåŠ¨åŒ–å·¥å…·">p4 ç†è§£å¹¶å‘ç¨‹åºæ‰§è¡Œ (Petersonç®—æ³•ã€æ¨¡å‹æ£€éªŒä¸è½¯ä»¶è‡ªåŠ¨åŒ–å·¥å…·)</h3>
<ul>
<li>Cè¯­è¨€çš„å½¢å¼è¯­ä¹‰
<ul>
<li>å…¨å±€å˜é‡åŠ å¤šä¸ªæ ˆå¸§ï¼›æ¯ä¸ªæ ˆå¸§æœ‰å…¶å±€éƒ¨å˜é‡å’Œpc</li>
</ul>
</li>
<li>Petersonç®—æ³•
<ul>
<li>çœ‹ä¸Šå»æ˜¯è°¦è®©çš„ï¼Œä½†å…¶å®æ˜¯è‡ªç§çš„</li>
<li>è¯æ˜æ­£ç¡®æ€§ï¼šç”»å‡ºçŠ¶æ€æœº
<ul>
<li>å›°å¢ƒï¼šä¸æ•¢ä¸ç”»ï¼Œä¸æ•¢ä¹±ç”»</li>
<li>è§£å†³ï¼š <a href="https://jyywiki.cn/pages/OS/2022/demos/model-checker.py"  target="_blank" rel="noopener" >model-checker</a></li>
<li>æŠŠç¨‹åºçš„é—®é¢˜å˜æˆå›¾è®ºçš„é—®é¢˜
<ul>
<li>safety çº¢è‰²çŠ¶æ€ä¸å¯è¾¾</li>
<li>liveness : ä»ä»»æ„çŠ¶æ€å‡ºå‘ï¼Œéƒ½èƒ½åˆ°è¾¾ç»¿/è“è‰²çŠ¶æ€ å¼ºè¿é€šåˆ†é‡</li>
</ul>
</li>
</ul>
</li>
<li>è®¸å¤šé‡è¦çš„æƒ³æ³•ï¼Œå‡ç»ƒä»¥åå°±æ˜¯æ¦‚å¿µ</li>
</ul>
</li>
<li>å¹¶å‘ç¨‹åº = çŠ¶æ€æœº</li>
<li>Python generator
<ul>
<li>e.g.
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">numbers</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">n</span> <span class="o">=</span> <span class="n">init</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">Trye</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">n</span> <span class="o">+=</span> <span class="n">step</span>
</span></span><span class="line"><span class="cl">    <span class="k">yield</span> <span class="n">n</span>
</span></span><span class="line"><span class="cl"><span class="n">g</span> <span class="o">=</span> <span class="n">numbers</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">g</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
</span></span></code></pre></div></li>
</ul>
</li>
</ul>
<h3 id="p5-å¹¶å‘æ§åˆ¶äº’æ–¥-è‡ªæ—‹é”äº’æ–¥é”å’Œ-futex">p5 å¹¶å‘æ§åˆ¶ï¼šäº’æ–¥ (è‡ªæ—‹é”ã€äº’æ–¥é”å’Œ futex)</h3>
<ul>
<li>ä¸èƒ½è§£å†³é—®é¢˜çš„æ—¶å€™ï¼Œå¯ä»¥æ‰¾åˆ°æ‰€ä¾èµ–çš„å‡è®¾ï¼Œå¹¶å¤§èƒ†åœ°æ‰“ç ´å®ƒ</li>
<li>spin çº¿ç¨‹ç›´æ¥å…±äº« locked</li>
<li>mutex é€šè¿‡ç³»ç»Ÿè°ƒç”¨è®¿é—® locked</li>
<li>futex(Fast Userspace muTexes)
<ul>
<li>Fast path: ä¸€æ¡åŸå­æŒ‡ä»¤ï¼Œä¸Šé”æˆåŠŸç«‹å³è¿”å›</li>
<li>Slow path: ä¸Šé”å¤±è´¥ï¼Œæ‰§è¡Œç³»ç»Ÿè°ƒç”¨ç¡çœ </li>
</ul>
</li>
</ul>
<h2 id="p6-å¹¶å‘æ§åˆ¶åŒæ­¥-æ¡ä»¶å˜é‡ä¿¡å·é‡ç”Ÿäº§è€…-æ¶ˆè´¹è€…å’Œå“²å­¦å®¶åƒé¥­é—®é¢˜">p6 å¹¶å‘æ§åˆ¶ï¼šåŒæ­¥ (æ¡ä»¶å˜é‡ã€ä¿¡å·é‡ã€ç”Ÿäº§è€…-æ¶ˆè´¹è€…å’Œå“²â™‚å­¦å®¶åƒé¥­é—®é¢˜)</h2>
<ul>
<li>æ€è€ƒï¼š æœ‰ä¸€å †ä»»åŠ¡ï¼Œå¹³å‡åˆ‡åˆ†æˆnå †ã€‚æœ‰xä¸ªçº¿ç¨‹è´Ÿè´£å®Œæˆè¯¥ä»»åŠ¡(x &lt; n) ä¸€ä¸ªçº¿ç¨‹ä¸€æ¬¡åªèƒ½å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œå®Œæˆåä¼šè‡ªåŠ¨å»åšä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚è¦æ€ä¹ˆå®ç°ï¼Ÿ</li>
<li>æœ‰ä¸‡èƒ½çš„æ–¹æ³•ï¼Œå°±è¦ç”¨ä¸‡èƒ½çš„æ–¹æ³•ã€‚
<ul>
<li>ä»–æ˜¯è¿™æ ·è¯ é‡Šçš„ã€‚å½“é¡¹ç›®ä»£ç é‡ä¸å¤§ï¼ˆä¸€åƒè¡Œä»¥å†…ï¼‰ï¼Œé¡¹ç›®è¿˜æ˜¯æ¯”è¾ƒå¥½ç»´æŠ¤çš„ï¼Œè¿™æ—¶å€™ç”¨å†™èªæ˜çš„å†™æ³•æ²¡é—®é¢˜ã€‚ä½†å½“é¡¹ç›®åˆ°äº†å‡ ä¸‡è¡Œç”šè‡³å‡ ç™¾ä¸‡è¡Œæ—¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦å¤šä¸ªäººæ¥è¿›è¡Œåä½œã€‚è€Œäººå’Œäººä¹‹é—´æœ€å¤§çš„éšœç¢å°±æ˜¯æ— æ³•å®Œå…¨æ²Ÿé€šï¼Œç†è§£å¯¹æ–¹çš„å¿ƒæ„ã€‚</li>
<li>ä¸è¦è¯•å›¾ç”¨èªæ˜çš„åŠæ³•è§£å†³å¹¶å‘é—®é¢˜</li>
<li>ä¸ªäººæƒ³æ³•ï¼šç¬¬ä¸€æ¬¡å¬è¿™ç§è¯´æ³•ï¼Œæœ‰ä¸€å®šé“ç†ã€‚</li>
</ul>
</li>
<li>ä¸‡èƒ½åŒæ­¥æ–¹æ³• â€”â€” æ¡ä»¶å˜é‡(Conditional Variables )
<ul>
<li>API
<ul>
<li>wait(cv, mutex) ğŸ’¤
è°ƒç”¨æ—¶å¿…é¡»ä¿è¯å·²ç»è·å¾— mutex
é‡Šæ”¾ mutexã€è¿›å…¥ç¡çœ çŠ¶æ€</li>
<li>signal/notify(cv) ğŸ’¬ ç§ä¿¡ï¼šèµ°èµ·
å¦‚æœæœ‰çº¿ç¨‹æ­£åœ¨ç­‰å¾… cvï¼Œåˆ™å”¤é†’å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹</li>
<li>broadcast/notifyAll(cv) ğŸ“£ æ‰€æœ‰äººï¼šèµ°èµ·
å”¤é†’å…¨éƒ¨æ­£åœ¨ç­‰å¾… cv çš„çº¿ç¨‹</li>
</ul>
</li>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// éœ€è¦ç­‰å¾…æ¡ä»¶æ»¡è¶³æ—¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cv</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nf">assert</span><span class="p">(</span><span class="n">cond</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1">// äº’æ–¥é”ä¿è¯äº†åœ¨æ­¤æœŸé—´æ¡ä»¶ cond æ€»æ˜¯æˆç«‹
</span></span></span><span class="line"><span class="cl"><span class="c1">// ...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">mutex_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mutex</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å…¶ä»–çº¿ç¨‹æ¡ä»¶å¯èƒ½è¢«æ»¡è¶³æ—¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nf">broadcast</span><span class="p">(</span><span class="o">&amp;</span><span class="n">cv</span><span class="p">);</span>
</span></span></code></pre></div></li>
<li>debug -&gt; éš”ç¦»å‡ºbugè§¦å‘çš„æœ€å°æ¡ä»¶</li>
</ul>
</li>
</ul>
<h2 id="p7-çœŸå®ä¸–ç•Œçš„å¹¶å‘ç¼–ç¨‹-é«˜æ€§èƒ½è®¡ç®—æ•°æ®ä¸­å¿ƒäººæœºäº¤äº’ä¸­çš„å¹¶å‘ç¼–ç¨‹">p7 çœŸå®ä¸–ç•Œçš„å¹¶å‘ç¼–ç¨‹ (é«˜æ€§èƒ½è®¡ç®—/æ•°æ®ä¸­å¿ƒ/äººæœºäº¤äº’ä¸­çš„å¹¶å‘ç¼–ç¨‹)</h2>
<ul>
<li>è°ˆblock chain &gt; æ˜¯ä¸ªå¾ˆå¥½çš„æŠ€æœ¯ã€‚ä½†è§‰å¾—ä¸å¤ªå¯¹ã€‚å› ä¸ºé€ æˆäº†ç›¸å½“å¤§çš„èµ„æºæµªè´¹ã€‚</li>
<li><a href="https://www.youtube.com/watch?v=FFftmWSzgmk&amp;ab_channel=Numberphile"  target="_blank" rel="noopener" >What&rsquo;s so special about the Mandelbrot Set? - Numberphile</a></li>
<li><a href="https://github.com/atanunq/viu"  target="_blank" rel="noopener" >atanunq/viu</a></li>
<li>æœç´¢é™ä½äº†çŸ¥è¯†çš„è·å–æˆæœ¬ï¼ŒChatGPTç­‰å†ä¸€æ¬¡é™ä½äº†æˆæœ¬ã€‚</li>
<li>goè¯­è¨€ï¼Œç¼–ç¨‹å‹å¥½ã€æ€§èƒ½ä¼˜åŒ–</li>
<li>åšå®¢æ˜¯web2.0 çš„ç¬¬ä¸€æ­¥</li>
<li>Ajax (Asynchronous JavaScript + XML)</li>
<li>è¿™æ¬¡è¯¾ä¸­è®²äº†ä¸‰ç§å¹¶å‘ç¼–ç¨‹ï¼Œæ ¹æ®ä¸åŒçš„éœ€è¦ï¼Œå®ç°å¹¶å‘çš„æ–¹å¼ä¹Ÿä¸åŒã€‚</li>
</ul>
<h2 id="p8-å¹¶å‘-bug-å’Œåº”å¯¹-æ­»é”æ•°æ®ç«äº‰åŸå­æ€§è¿åé˜²å¾¡æ€§ç¼–ç¨‹å’ŒåŠ¨æ€åˆ†æ">p8 å¹¶å‘ bug å’Œåº”å¯¹ (æ­»é”/æ•°æ®ç«äº‰/åŸå­æ€§è¿åï¼›é˜²å¾¡æ€§ç¼–ç¨‹å’ŒåŠ¨æ€åˆ†æ)</h2>
<ul>
<li>è½¯ä»¶æ˜¯éœ€æ±‚åœ¨è®¡ç®—æœºæ•°å­—ä¸–ç•Œçš„æŠ•å½±ã€‚</li>
<li>assertçš„ä½¿ç”¨</li>
<li>æ²¡æœ‰å·¥å…·ä¸åšç³»ç»Ÿ</li>
<li>premature optimization is root of all evil</li>
<li>ç¼–ç¨‹è¯­è¨€çš„ç¼ºé™·â€”â€”å¯¹ç¨‹åºå‘˜çš„å®Œå…¨ä¿¡ä»»ï¼šå› ä¸ºè®¡ç®—èµ„æºçš„å®è´µ</li>
<li>åŠ¨æ€åˆ†æå·¥å…· <code>-fsanitize</code></li>
<li>Canary msvc ä¸­ debug mode çš„canary  <code>(b'\xcc' * 80).decode('gb2312')</code></li>
</ul>
<h2 id="p9-æ“ä½œç³»ç»Ÿçš„çŠ¶æ€æœºæ¨¡å‹-æ“ä½œç³»ç»Ÿçš„åŠ è½½-thread-os-ä»£ç è®²è§£">p9 æ“ä½œç³»ç»Ÿçš„çŠ¶æ€æœºæ¨¡å‹ (æ“ä½œç³»ç»Ÿçš„åŠ è½½; thread-os ä»£ç è®²è§£)</h2>
<ul>
<li>å¤§å­¦çš„çœŸæ­£æ„ä¹‰:få°†å·²æœ‰çš„çŸ¥è¯†å’Œæ–¹æ³•é‡æ–°æ¶ˆåŒ–ï¼Œä¸ºå¤§å®¶å»ºç«‹å¥½ â€œå°é˜¶â€ï¼Œåœ¨æœ‰é™çš„æ—¶é—´é‡Œè¿…é€Ÿèµ¶ä¸Šæ•°åå¹´æ¥å»ºç«‹èµ·çš„å­¦ç§‘ä½“ç³»ã€‚</li>
</ul>
<h2 id="p10-çŠ¶æ€æœºæ¨¡å‹çš„åº”ç”¨-ç»†èƒè‡ªåŠ¨æœº-gdbrrperf-ä»£ç éªŒè¯å·¥å…·">p10 çŠ¶æ€æœºæ¨¡å‹çš„åº”ç”¨ (ç»†èƒè‡ªåŠ¨æœº; gdb/rr/perf; ä»£ç éªŒè¯å·¥å…·)</h2>
<ul>
<li>åˆ†å¸ƒå¼ç³»ç»Ÿä¹Ÿæ˜¯ä¸€ç§å¹¶å‘ç¨‹åºï¼Œä½†è¦æ›´å¤æ‚ã€‚å› ä¸ºå¹¶å‘ç¨‹åºå‡è®¾äº†æ¯ä¸ªthreadéƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œè€Œåˆ†å¸ƒå¼ç³»ç»Ÿåˆ™è¦è€ƒè™‘èŠ‚ç‚¹ä¸¢å¤±çš„æƒ…å†µã€‚</li>
</ul>
<h2 id="p11-æ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹-æœ€å°-linux-fork-execve-å’Œ-exit">p11 æ“ä½œç³»ç»Ÿä¸Šçš„è¿›ç¨‹ (æœ€å° Linux; fork, execve å’Œ exit)</h2>
<ul>
<li>Linux æ“ä½œç³»ç»Ÿå¯åŠ¨æµç¨‹
CPU Reset â†’ Firmware â†’ Loader â†’ Kernel _start() â†’ ç¬¬ä¸€ä¸ªç¨‹åº /bin/init â†’ ç¨‹åº (çŠ¶æ€æœº) æ‰§è¡Œ + ç³»ç»Ÿè°ƒç”¨</li>
<li>Fork Bomb:
<code>:(){:|:&amp;};:</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">:<span class="o">()</span> <span class="o">{</span>         <span class="c1"># æ ¼å¼åŒ–ä¸€ä¸‹</span>
</span></span><span class="line"><span class="cl">: <span class="p">|</span> : <span class="p">&amp;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span><span class="p">;</span> :
</span></span></code></pre></div></li>
<li>stdout:
ç»ˆç«¯: line buffer
pipe , file :full buffer (é™¤éæ˜¾ç¤ºåœ°è°ƒç”¨fflush)
<pre tabindex="0"><code></code></pre></li>
<li><strong>fork</strong>
<ul>
<li>ç¨‹åºå°±æ˜¯çŠ¶æ€æœºï¼Œæ­£åœ¨æ‰§è¡Œçš„ç¨‹åºä¹Ÿæ˜¯çŠ¶æ€æœºï¼Œforkåˆ›å»ºçŠ¶æ€æœºçš„å‰¯æœ¬ï¼›</li>
<li>åˆ›å»ºçš„è¿›ç¨‹è¿”å›+1ï¼Œå­è¿›ç¨‹è¿”å›ä¸º0</li>
<li>æŠŠæ‰€æœ‰çš„å¯„å­˜å™¨å’Œå†…å­˜éƒ½å¤åˆ¶</li>
</ul>
</li>
<li><strong>execve</strong>
<ul>
<li>å°†å½“å‰è¿è¡Œçš„çŠ¶æ€æœºé‡ç½®æˆæˆå¦ä¸€ä¸ªç¨‹åºçš„åˆå§‹çŠ¶æ€</li>
</ul>
</li>
<li><strong>_exit</strong></li>
</ul>
<h2 id="p12-è¿›ç¨‹çš„åœ°å€ç©ºé—´-pmap-vdso-mmap-æ¸¸æˆä¿®æ”¹å™¨å¤–æŒ‚">p12 è¿›ç¨‹çš„åœ°å€ç©ºé—´ (pmap; vdso; mmap; æ¸¸æˆä¿®æ”¹å™¨/å¤–æŒ‚)</h2>
<ul>
<li>ç«¯åº
<ul>
<li>å¤§ç«¯ (big endian): ä½åœ°å€å­˜æ”¾<em>é«˜</em>æœ‰æ•ˆå­—èŠ‚</li>
<li>å°ç«¯ (little endian): ä½å­—èŠ‚å­˜æ”¾<em>ä½</em>æœ‰æ•ˆå­—èŠ‚</li>
</ul>
</li>
<li>å·¥å…·ä½¿ç”¨
<ul>
<li>gdb</li>
<li>readelf</li>
<li>pmap</li>
</ul>
</li>
<li>è®¡ç®—æœºä¸–ç•Œæ²¡æœ‰é­”æ³•ã€‚å› ä¸ºç¨‹åºå°±æ˜¯çŠ¶æ€æœºã€‚</li>
<li>vdso:ä¸è¿›å…¥æ“ä½œç³»ç»Ÿå†…æ ¸ï¼Œå®ç°ç³»ç»Ÿè°ƒç”¨</li>
<li>mmapï¼š</li>
<li>æ–‡ä»¶=å­—èŠ‚åºåˆ—ï¼›å†…å­˜=å­—èŠ‚åºåˆ—ï¼› everything is a file</li>
</ul>
<h2 id="p13-ç³»ç»Ÿè°ƒç”¨å’Œ-shell-freestanding-shell-ç»ˆç«¯å’Œ-job-control">p13 ç³»ç»Ÿè°ƒç”¨å’Œ Shell (freestanding shell, ç»ˆç«¯å’Œ job control)</h2>
<ul>
<li>cdæ˜¯å†…éƒ¨å‘½ä»¤ï¼šæ”¹å˜å½“å‰ç›®å½•æ˜¯ç”¨ç³»ç»Ÿè°ƒç”¨å®ç°çš„</li>
<li><code>strace -f gcc a.c 2&gt;&amp;1 | vim -</code> This will pipe both stdout and stderr to vim. The <code>-</code> argument tells vim to read from stdin.</li>
<li><code>strace pmap 152 |&amp; vim - </code>
<code>|&amp;</code> : This is a shorthand for <code>2&gt;&amp;1 |</code> in bash and zsh. It passes both standard output and standard error of one command as input to another.</li>
<li>fish, zsh å’Œ bash éƒ½æ˜¯å¸¸ç”¨çš„å‘½ä»¤è¡Œ shell; shæ˜¯æ¯”è¾ƒåŸå§‹çš„</li>
<li>clear æ¸…å±</li>
<li><code>,./a.out &amp;</code>  åå°æ‰§è¡Œ./a.out</li>
</ul>
<h2 id="p14-c-æ ‡å‡†åº“çš„å®ç°-ç³»ç»Ÿè°ƒç”¨çš„å°è£…å†…å­˜ç©ºé—´ç®¡ç†">p14 C æ ‡å‡†åº“çš„å®ç° (ç³»ç»Ÿè°ƒç”¨çš„å°è£…ï¼›å†…å­˜ç©ºé—´ç®¡ç†)</h2>
<ul>
<li>æ–‡ä»¶æè¿°ç¬¦è¿˜æ˜¯ä¸ç†è§£ã€‚å°è±¡ä¸­è¿™æ˜¯ç¬¬äºŒæ¬¡è°ˆåˆ°äº†&quot;everything is a file&quot;
<ul>
<li>osçš„å¯¹è±¡å’Œå¯¹è±¡çš„è®¿é—®</li>
</ul>
</li>
<li>gdnçš„ä½¿ç”¨
<ul>
<li><code>No symbol table is loaded.  Use the &quot;file&quot; command</code>ã€‚å¯èƒ½æ˜¯ç¼–è¯‘é€‰é¡¹æœªåŒ…å«debugä¿¡æ¯,å¦‚gccæ²¡æœ‰æ·»åŠ -gé€‰é¡¹ã€‚</li>
</ul>
</li>
<li>premature optimization is the root of all evil.</li>
<li>è„±ç¦»workloadè°ˆä¼˜åŒ–å°±æ˜¯è€æµæ°“</li>
<li>ç»å…¸çš„è®¾è®¡ï¼š
<ul>
<li>fast path</li>
<li>slow path</li>
</ul>
</li>
</ul>
<h2 id="p15-fork-çš„åº”ç”¨-æ–‡ä»¶æè¿°ç¬¦çš„å¤åˆ¶å†™æ—¶å¤åˆ¶åˆ›å»ºå¹³è¡Œå®‡å®™çš„é­”æ³•">p15 fork çš„åº”ç”¨ (æ–‡ä»¶æè¿°ç¬¦çš„å¤åˆ¶ï¼›å†™æ—¶å¤åˆ¶ï¼›åˆ›å»ºå¹³è¡Œå®‡å®™çš„é­”æ³•)</h2>
<ul>
<li>fork çŠ¶æ€æœºå¤åˆ¶åŒ…æ‹¬æŒæœ‰çš„æ‰€æœ‰æ“ä½œç³»ç»Ÿå¯¹è±¡</li>
<li>åŒ…æ‹¬æŒæœ‰çš„æ‰€æœ‰æ“ä½œç³»ç»Ÿå¯¹è±¡</li>
<li>æ–‡ä»¶æè¿°ç¬¦ï¼ˆfile discriptorï¼‰
<ul>
<li>ä¸€ä¸ªæŒ‡å‘æ“ä½œç³»ç»Ÿå†…å¯¹è±¡çš„ â€œæŒ‡é’ˆâ€</li>
<li>dup() çš„ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯å…±äº« offset</li>
</ul>
</li>
<li>è®¿é—®ç©ºæŒ‡é’ˆä¹Ÿä¼šé€ æˆç¼ºé¡µä¸­æ–­</li>
<li>â€œCopy-on-writeâ€ åªæœ‰è¢«å†™å…¥çš„é¡µé¢æ‰ä¼šå¤åˆ¶ä¸€ä»½
<ul>
<li>è¢«å¤åˆ¶åï¼Œæ•´ä¸ªåœ°å€ç©ºé—´éƒ½è¢«æ ‡è®°ä¸º â€œåªè¯»â€</li>
<li>æ“ä½œç³»ç»Ÿæ•è· Page Fault åé…Œæƒ…å¤åˆ¶é¡µé¢</li>
<li>fork-execve æ•ˆç‡å¾—åˆ°æå‡</li>
</ul>
</li>
<li>æ“ä½œç³»ç»Ÿä¼šç»´æŠ¤æ¯ä¸ªé¡µé¢çš„å¼•ç”¨è®¡æ•°</li>
<li>å®šä¹‰è¿›ç¨‹æ‰€å ç”¨çš„å†…å­˜</li>
<li>pageæ˜¯å½’osæ‰€æœ‰çš„ï¼Œè€Œéè¿›ç¨‹</li>
<li>ä½¿ç”¨forkæ¥æœç´¢å¹¶è¡ŒåŒ–ã€‚</li>
</ul>
<h2 id="p16-ä»€ä¹ˆæ˜¯å¯æ‰§è¡Œæ–‡ä»¶-è°ƒè¯•ä¿¡æ¯stack-unwindingé™æ€é“¾æ¥ä¸­çš„é‡å®šä½">p16 ä»€ä¹ˆæ˜¯å¯æ‰§è¡Œæ–‡ä»¶ (è°ƒè¯•ä¿¡æ¯ï¼›Stack Unwindingï¼›é™æ€é“¾æ¥ä¸­çš„é‡å®šä½)</h2>
<ul>
<li>å¯æ‰§è¡Œæ–‡ä»¶æè¿°äº†çŠ¶æ€æœºï¼Œæ˜¯ä¸€ä¸ªæè¿°äº†çŠ¶æ€æœºçš„åˆå§‹çŠ¶æ€ + è¿ç§»çš„æ•°æ®ç»“æ„</li>
<li>osæ²¡æœ‰é­”æ³•ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½æœ‰è§£é‡Š</li>
<li><code>She-bang</code> <code>#! interpreter [optional-arg]</code></li>
<li>GNU binutils
<ul>
<li>ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶
<ul>
<li>ld (linker), as (assembler)</li>
<li>ar, ranlib</li>
</ul>
</li>
<li>åˆ†æå¯æ‰§è¡Œæ–‡ä»¶
<ul>
<li>objcopy/objdump/readelf</li>
<li>addr2line, size, nm</li>
</ul>
</li>
</ul>
</li>
<li><code>objdump -d a.out | less</code> disasm</li>
<li><code>addr2line 401122 a.out</code></li>
<li>elf: å°ç²¾çµï¼›dwarfï¼šçŸ®äºº</li>
<li>å°†ä¸€ä¸ª assembly (æœºå™¨) çŠ¶æ€æ˜ å°„åˆ° â€œC ä¸–ç•Œâ€ çŠ¶æ€å¾ˆéš¾</li>
<li>gccç­‰ä»å­˜åœ¨ç€è®¸å¤šä¸å®Œç¾</li>
<li>ç¼–è¯‘å™¨ï¼Œæ±‡ç¼–å™¨ï¼Œé“¾æ¥å™¨</li>
</ul>
<h2 id="p17-åŠ¨æ€é“¾æ¥å’ŒåŠ è½½-é™æ€-elf-åŠ è½½å™¨å®ç°è°ƒè¯•-linux-å†…æ ¸åŠ¨æ€é“¾æ¥å’ŒåŠ è½½">p17 åŠ¨æ€é“¾æ¥å’ŒåŠ è½½ (é™æ€ ELF åŠ è½½å™¨å®ç°ï¼›è°ƒè¯• Linux å†…æ ¸ï¼›åŠ¨æ€é“¾æ¥å’ŒåŠ è½½)</h2>
<ul>
<li>è‡ªå®šä¹‰äº†ä¸€ä¸ªäºŒè¿›åˆ¶æ ¼å¼æ–‡ä»¶</li>
<li>GOT ï¼š global offset table</li>
<li>PLT : procedure linkage table</li>
</ul>
<h2 id="p23-1-bit-æ•°æ®çš„å­˜å‚¨-å»¶è¿Ÿçº¿ç£èŠ¯dramsramç£å¸¦ç£ç›˜å…‰ç›˜flash-ssd">p23 1-Bit æ•°æ®çš„å­˜å‚¨ (å»¶è¿Ÿçº¿/ç£èŠ¯/DRAM/SRAM/ç£å¸¦/ç£ç›˜/å…‰ç›˜/Flash SSD)</h2>
<ul>
<li>volatile: ç¡®ä¿è¯¥å˜é‡çš„å®é™…å€¼ä¸å†…å­˜ä¸­çš„å€¼ä¸€è‡´,æ¯æ¬¡è¯»å–éƒ½æ˜¯æœ€æ–°å€¼,ä¹Ÿç¦æ­¢ç¼–è¯‘å™¨å¯¹å…¶è¿›è¡Œä¼˜åŒ–ã€‚</li>
<li>core dumped ç£æ€§å†…å­˜å¹´ä»£å¼€å§‹çš„æ¦‚å¿µã€‚</li>
<li>å±€éƒ¨æ€§åŸç† -&gt; å¯ä»¥æŒ‰ç…§å¤§å—æ¥è¯»å†™</li>
</ul>
<h2 id="p24-è¾“å…¥è¾“å‡ºè®¾å¤‡æ¨¡å‹-ä¸²å£é”®ç›˜ç£ç›˜æ‰“å°æœºæ€»çº¿ä¸­æ–­æ§åˆ¶å™¨dma-å’Œ-gpu">p24 è¾“å…¥è¾“å‡ºè®¾å¤‡æ¨¡å‹ (ä¸²å£/é”®ç›˜/ç£ç›˜/æ‰“å°æœº/æ€»çº¿/ä¸­æ–­æ§åˆ¶å™¨/DMA å’Œ GPU</h2>
<ul>
<li>DMA: direct memory access : ä¸€ä¸ªä¸“é—¨æ‰§è¡Œ&quot;memcpy&quot;ç¨‹åºçš„cpu</li>
<li>IPC: Instruction per second</li>
<li>GPU:
<ul>
<li>ä¸€ä¸ªé€šç”¨è®¡ç®—è®¾å¤‡</li>
<li>å¤§é‡å¹¶è¡Œç›¸ä¼¼çš„ä»»åŠ¡</li>
</ul>
</li>
<li>å¼‚æ„è®¡ç®—ï¼šéƒ½èƒ½åšï¼Œä½†é€‰é‚£ä¸ªæœ€åˆé€‚çš„ã€‚ï¼ˆjjyåœ¨22å¹´è¯´çš„ç°åœ¨å·²ç»èƒ½æ„Ÿè§‰åˆ°æœ‰ç›¸å…³çš„è¶‹åŠ¿äº†ã€‚ä¸è¿‡å€’ä¸æ˜¯é‡Œé¢ä¸¾ä¾‹çš„æŒ–çŸ¿ï¼Œè€Œæ˜¯llmæ¨¡å‹ï¼‰</li>
</ul>
<h2 id="p25-è®¾å¤‡é©±åŠ¨ç¨‹åº-linux-è®¾å¤‡é©±åŠ¨-gpu-å’Œ-cuda-å­˜å‚¨è®¾å¤‡æŠ½è±¡">p25 è®¾å¤‡é©±åŠ¨ç¨‹åº (Linux è®¾å¤‡é©±åŠ¨; GPU å’Œ CUDA; å­˜å‚¨è®¾å¤‡æŠ½è±¡)</h2>
<ul>
<li>è®¾å¤‡æŠ½è±¡æˆ æ”¯æŒå„ç±»æ“ä½œçš„å¯¹è±¡ (æ–‡ä»¶)
<ul>
<li>read - ä»è®¾å¤‡æŸä¸ªæŒ‡å®šçš„ä½ç½®è¯»å‡ºæ•°æ®</li>
<li>write - å‘è®¾å¤‡æŸä¸ªæŒ‡å®šä½ç½®å†™å…¥æ•°æ®</li>
<li>ioctl - è¯»å–/è®¾ç½®è®¾å¤‡çš„çŠ¶æ€</li>
</ul>
</li>
<li><code>stty -a</code></li>
<li>GPU
<ul>
<li>Single Instruction, Multiple Thread</li>
</ul>
</li>
<li>è¯»ä¼˜å…ˆçš„æ­£ç¡®æ€§</li>
</ul>
<h2 id="p26-æ–‡ä»¶ç³»ç»Ÿ-api-è®¾å¤‡åœ¨åº”ç”¨é—´çš„å…±äº«ç›®å½•å’Œæ–‡ä»¶-api">p26 æ–‡ä»¶ç³»ç»Ÿ API (è®¾å¤‡åœ¨åº”ç”¨é—´çš„å…±äº«ï¼›ç›®å½•å’Œæ–‡ä»¶ API)</h2>
<ul>
<li>ä¿¡æ¯çš„å±€éƒ¨æ€§</li>
<li>Windowsä»cç›˜å¼€å§‹æ—¶æ˜¯å—å…¶å‰èº«Dosç³»ç»Ÿçš„å½±å“ï¼Œé‚£ä¸ªæœ‰aã€b</li>
<li><code>mount disk.img  /mnt</code></li>
<li><code>umount /mnt</code></li>
<li>ç¡¬ï¼ˆhardï¼‰é“¾æ¥
<ul>
<li><code>ln /usr/local/python3 python</code></li>
<li>ç›®å½•ä¸­ä»…å­˜å‚¨æŒ‡å‘æ–‡ä»¶æ•°æ®çš„æŒ‡é’ˆ</li>
<li>å…è®¸ä¸€ä¸ªæ–‡ä»¶è¢«å¤šä¸ªç›®å½•å¼•ç”¨.</li>
<li>æ— æ³•ç”¨æ¥é“¾æ¥ç›®å½•ï¼Œä¹Ÿä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ</li>
<li>é€šè¿‡<code>ls -i</code>æŸ¥çœ‹æ˜¯å¦ä¸ºç¡¬é“¾æ¥</li>
</ul>
</li>
<li>è½¯ (symbolic) é“¾æ¥
<ul>
<li>â€œå¿«æ·æ–¹å¼â€</li>
<li><code> ln -s ../p24 p24</code></li>
<li>ç›®å½•ä»â€œæ ‘â€å˜ä¸ºäº†â€œå›¾â€ï¼Œè¿˜æ˜¯æœ‰ç¯å›¾</li>
</ul>
</li>
<li><code>cd</code>çš„ç‰¹æ®Šæ€§
<ul>
<li>æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„å·¥ä½œç›®å½•ï¼ˆpwdï¼‰ï¼Œè€Œè¿™ä¸ªç›®å½•åªæœ‰ç³»ç»Ÿè°ƒç”¨æ‰èƒ½å¤Ÿä¿®æ”¹</li>
</ul>
</li>
</ul>
<h2 id="p27-fat-å’Œ-unix-æ–‡ä»¶ç³»ç»Ÿ-æ•°æ®ç»“æ„è§†è§’çš„æ–‡ä»¶ç³»ç»Ÿ-fat-æ‰‹å†Œå¯¼è¯»å’Œç›®å½•æ ‘éå†">p27 FAT å’Œ UNIX æ–‡ä»¶ç³»ç»Ÿ (æ•°æ®ç»“æ„è§†è§’çš„æ–‡ä»¶ç³»ç»Ÿ; FAT æ‰‹å†Œå¯¼è¯»å’Œç›®å½•æ ‘éå†)</h2>
<ul>
<li>æ•°æ®ç»“æ„çš„å‡è®¾ï¼šæ•°æ®æ˜¯ä»¥å­—èŠ‚æ¥å­˜å‚¨çš„ã€‚</li>
<li>RAM å’Œ blockçš„åŒºåˆ«</li>
<li>FAT(File Allocation Table)
<ul>
<li>å°†æŒ‡é’ˆé›†ä¸­å­˜æ”¾åœ¨æ–‡ä»¶ç³»ç»Ÿçš„æŸä¸ªåŒºåŸŸ</li>
<li>é€‚åˆå°æ–‡ä»¶</li>
<li>ä¼šäº§ç”Ÿç¢ç‰‡ï¼ˆfragmentationï¼‰</li>
<li>åŸºæœ¬å‡è®¾
<ul>
<li>é“¾è¡¨æ— ç¯ä¸”é•¿åº¦å’Œæ–‡ä»¶å¤§å°ä¸€è‡´</li>
<li>FREEçš„clusterä¸èƒ½æœ‰å…¥è¾¹</li>
</ul>
</li>
</ul>
</li>
<li>cluster</li>
<li>sector</li>
<li>ext2
<ul>
<li>å¤§æ–‡ä»¶çš„éšæœºè¯»å†™æ€§èƒ½æå‡æ˜æ˜¾ (O(1))</li>
<li>æ”¯æŒé“¾æ¥ (ä¸€å®šç¨‹åº¦å‡å°‘ç©ºé—´æµªè´¹)</li>
<li>inode åœ¨ç£ç›˜ä¸Šè¿ç»­å­˜å‚¨ï¼Œä¾¿äºç¼“å­˜/é¢„å–</li>
<li>ç¢ç‰‡</li>
</ul>
</li>
</ul>
<h2 id="p28-æŒä¹…æ•°æ®çš„å¯é æ€§-raid-å´©æºƒä¸€è‡´æ€§-fsck-å’Œæ—¥å¿—">p28 æŒä¹…æ•°æ®çš„å¯é æ€§ (RAID; å´©æºƒä¸€è‡´æ€§; FSCK å’Œæ—¥å¿—)</h2>
<ul>
<li>è™šæ‹ŸåŒ–
<ul>
<li>cpuçš„è™šæ‹ŸåŒ–ï¼šé€šè¿‡åˆ†æ—¶ç­‰æŠ€æœ¯è®©å¤šä¸ªè¿›ç¨‹å¹¶è¡Œï¼Œç›¸å½“äºè™šæ‹Ÿå‡ºäº†å¤šä¸ªcpu</li>
<li>å†…å­˜çš„è™šæ‹ŸåŒ–ï¼šä¸€ä»½å†…å­˜é€šè¿‡mmuï¼Œè™šæ‹Ÿæˆæ¯ä¸ªè¿›ç¨‹çš„åœ°å€ç©ºé—´</li>
<li>RAIDï¼šåå‘çš„è™šæ‹ŸåŒ–ï¼šå¤šä¸ªç£ç›˜è™šæ‹ŸåŒ–ä¸€ä¸ªç£ç›˜</li>
</ul>
</li>
<li>RAID
<ul>
<li>RAID0 : äº¤é”™æ’åˆ—ï¼š æå‡å®¹é‡å’Œå¸¦å®½</li>
<li>RAID1 : æå‡å®¹é”™å’Œè¯»å¸¦å®½</li>
<li>RAID4 : é¢å¤–çš„ä¸€å—æ ¡éªŒç›˜
<ul>
<li>è‡´å‘½ç¼ºé™·ï¼šéšæœºå†™çš„æ€§èƒ½åªèƒ½æœ‰æ ¡éªŒç›˜æ€§èƒ½çš„ä¸€åŠ</li>
</ul>
</li>
<li>RAID5 : Rotating Parity</li>
</ul>
</li>
<li>RAIDå¸¦æ¥çš„è”æƒ³ï¼š
å¤šä¸ªç£ç›˜è™šæ‹ŸåŒ–ä¸ºä¸€ä¸ªåˆå¤§åˆå¿«åˆå¯é çš„ç£ç›˜ï¼Œå¤šå°ç”µè„‘è™šæ‹ŸåŒ–ä¸ºä¸€ä¸ªåˆå¤§åˆå¿«åˆå¯é çš„ç”µè„‘
é‚£èƒ½ä¸èƒ½å¤šä¸ªç¥ç»ç½‘ç»œè™šæ‹ŸåŒ–ä¸ºä¸€ä¸ªæ›´å¥½çš„ç¥ç»ç½‘ç»œ</li>
<li>å´©æºƒä¸€è‡´æ€§  (Crash Consistency)
<ul>
<li>åœºæ™¯ï¼šå†™å…¥çš„æ—¶å€™çªç„¶æ–­ç”µäº†æ€ä¹ˆåŠï¼Ÿ</li>
<li>æ–¹æ³•1ï¼šæŒ‰ç…§ä¸€å®šé¡ºåºæ¥å†™ï¼Œä¸” â€œall or nothingâ€
<ul>
<li>å›°éš¾ï¼šç£ç›˜ä¸æä¾›å¤šå—è¯»å†™ â€œall or nothingâ€ çš„æ”¯æŒï¼Œç”šè‡³ä¸ºäº†æ€§èƒ½ï¼Œæ²¡æœ‰é¡ºåºä¿è¯ã€‚</li>
</ul>
</li>
<li>æ–¹æ³•2ï¼š File System Checking (FSCK)
<ul>
<li>æ ¹æ®ç£ç›˜ä¸Šå·²æœ‰çš„ä¿¡æ¯ï¼Œæ¢å¤å‡º â€œæœ€å¯èƒ½â€ çš„æ•°æ®ç»“æ„</li>
<li>å›°éš¾ï¼šéš¾ï¼›å¦‚æœä¿®å¤çš„æ—¶å€™å†æ‰ä¸€æ¬¡ç”µï¼Ÿ</li>
</ul>
</li>
<li>æ–¹æ³•3ï¼š æ—¥å¿—</li>
<li>å…·ä½“ï¼š
<ul>
<li>æ•°æ®ç»“æ„æ“ä½œå‘ç”Ÿæ—¶ï¼Œç”¨ (2) append-only è®°å½•æ—¥å¿—</li>
<li>æ—¥å¿—è½ç›˜åï¼Œç”¨ (1) æ›´æ–°æ•°æ®ç»“æ„</li>
<li>å´©æºƒåï¼Œé‡æ”¾æ—¥å¿—å¹¶æ¸…é™¤ (ç§°ä¸º redo logï¼›ç›¸åº”ä¹Ÿå¯ä»¥ undo log)</li>
</ul>
</li>
<li>ä¼˜åŒ–: journaling (jdb2)</li>
</ul>
</li>
</ul>
<h2 id="p30-ç°ä»£å­˜å‚¨ç³»ç»Ÿ-å…³ç³»æ•°æ®åº“å’Œåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ">p30 ç°ä»£å­˜å‚¨ç³»ç»Ÿ (å…³ç³»æ•°æ®åº“å’Œåˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ)</h2>
<ul>
<li>æ•°æ®åº“
<ul>
<li>å…³é”®
<ul>
<li>ç´¢å¼•</li>
<li>æŸ¥è¯¢ä¼˜åŒ–</li>
</ul>
</li>
<li>magicï¼šä½ åªç®¡å†™sqlè¯­å¥ï¼Œç›¸åº”çš„æœç´¢ä¼˜åŒ–å®ƒæ¥åš</li>
<li>è¦æ±‚ï¼šacid
<ul>
<li>Atoming</li>
<li>Consistency</li>
<li>Isolation</li>
<li>Durability</li>
</ul>
</li>
</ul>
</li>
<li>å›¾çµå¥–
<ul>
<li>è¿™é—¨è¯¾å¬ä¸‹æ¥ï¼Œå¬åˆ°äº†å¥½å¤šçŸ¥è¯†ç‚¹èƒŒåéƒ½æ˜¯è·å¾—è¿‡å›¾çµå¥–çš„ç ”ç©¶ï¼Œç”šè‡³å¼€åˆ›äº†ä¸€æ•´ä¸ªäº§ä¸šã€‚</li>
</ul>
</li>
<li>å…³ç³»å‹æ•°æ®åº“è·Ÿä¸ä¸Šç¤¾äº¤ç½‘ç»œçš„éœ€æ±‚</li>
<li>cap theorem
<ul>
<li>Consistency</li>
<li>Availability</li>
<li>Partition Tolerance</li>
</ul>
</li>
<li>åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</li>
</ul>
<h2 id="æ„Ÿæƒ³">æ„Ÿæƒ³</h2>
<p>è’‹ç‚ç‚è¿™é—¨è¯¾è¿˜æ˜¯åˆ«äººæ¨èçš„ã€‚ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿˜ä¸ä»¥ä¸ºæ„ï¼Œä½†å‡ºç°çš„æ¬¡æ•°å¤šäº†å°±è§‰å¾—æœ‰å¿…è¦å»çœ‹çœ‹ã€‚å‘ç°æ˜¯ä¸€å¤§æƒŠå–œã€‚</p>
<h2 id="æ”¶è·">æ”¶è·</h2>
<ol>
<li>åŸç‰ˆä¹¦èƒ½çœ‹å¾—ä¸‹æ¥äº†ã€‚å¤§æ®µçš„è‹±æ–‡ï¼Œä¹‹å‰çœ‹ç€æœ‰ç‚¹æ€•ï¼Œç°åœ¨è§‰å¾—ä¹Ÿèƒ½çœ‹ä¸‹æ¥ï¼Œå¹¶ä¸”é€Ÿåº¦è¿˜å¯ä»¥ã€‚</li>
</ol>
<h2 id="è¯¾å¤–èµ„æ–™">è¯¾å¤–èµ„æ–™</h2>
<ul>
<li><a href="https://plantegg.github.io/2022/06/05/%E4%B8%8A%E4%B8%8B%E6%96%87%E5%88%87%E6%8D%A2%E5%BC%80%E9%94%80/"  target="_blank" rel="noopener" >ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ä»£ä»·</a></li>
<li><a href="https://plantegg.github.io/2021/06/01/CPU%E7%9A%84%E5%88%B6%E9%80%A0%E5%92%8C%E6%A6%82%E5%BF%B5/"  target="_blank" rel="noopener" >CPUçš„åˆ¶é€ å’Œæ¦‚å¿µ</a></li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>æ“ä½œç³»ç»Ÿå¤ä¹ ç¬”è®°</title>
      <link>https://euds63.github.io/2023/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Mon, 19 Jun 2023 18:35:11 +0800</pubDate>
      
      <guid>https://euds63.github.io/2023/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
      <description>æ“ä½œç³»ç»Ÿå¤ä¹ ç¬”è®°</description>
      <content:encoded><![CDATA[<h1 id="æœŸæœ«å¤ä¹ ">æœŸæœ«å¤ä¹ </h1>
<h2 id="chpter-3-process">Chpter 3 Process</h2>
<ul>
<li>æ“ä½œç³»ç»Ÿè¿›è¡Œä»»åŠ¡è°ƒåº¦å’Œèµ„æºåˆ†é…çš„åŸºæœ¬å•ä½</li>
<li>Process include:
<ol>
<li>Program code</li>
</ol>
<ul>
<li>text section</li>
</ul>
<ol start="2">
<li>program counter and processorsâ€™ registers</li>
<li>Stack</li>
</ol>
<ul>
<li>Function parameters</li>
<li>Return address</li>
<li>Local variables</li>
</ul>
<ol start="4">
<li>data section</li>
</ol>
<ul>
<li>Global variables</li>
</ul>
<ol start="5">
<li>Heap</li>
</ol>
<ul>
<li>Dynamically allocated memory</li>
</ul>
</li>
<li>Process State
<ul>
<li>äº”æ€æ¨¡å‹
<ul>
<li>new</li>
<li>ready:waiting to be assigned to a processor</li>
<li>waiting: waiting for some event to occur</li>
<li>running</li>
<li>terminated</li>
</ul>
</li>
</ul>
</li>
<li>Process control blockï¼ˆPCBï¼‰
<ul>
<li>åŒ…å«ä¿¡æ¯æœ‰ï¼š
<ul>
<li>Process number</li>
<li>Process state</li>
<li>Program counter
<ul>
<li>ä¸‹æ¡æŒ‡ä»¤çš„åœ°å€</li>
</ul>
</li>
<li>CPU registers</li>
<li>CPU scheduling information</li>
<li>Memory-management information</li>
<li>Accounting information</li>
<li>I/O status information</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="process-scheduling">Process Scheduling</h3>
<ul>
<li>
<p>Scheduling queues</p>
<ol>
<li>Job queue</li>
</ol>
<ul>
<li>set of all processes in the system</li>
<li>As processes/job enter the systemï¼Œthey are put into the job queue</li>
</ul>
<ol start="2">
<li>Ready queue</li>
</ol>
<ul>
<li>set of all processes residing in â€œ(main) memoryâ€, ready and â€œwaitingâ€ to execute</li>
</ul>
<ol start="3">
<li>Device queues</li>
</ol>
<ul>
<li>set of processes waiting for an I/O device</li>
</ul>
</li>
<li>
<p>Scheduler(è°ƒåº¦å™¨)</p>
<ol>
<li>Long-term scheduler or job scheduler</li>
</ol>
<ul>
<li>job queue -&gt; ready queue</li>
<li>may  be absent on Time-sharing system such as UNIX  and Windows
<ul>
<li>They put every new process in memory for the short-term scheduler</li>
</ul>
</li>
</ul>
<ol start="2">
<li>Short-term scheduler Or CPU scheduler: è¿›ç¨‹è°ƒåº¦</li>
</ol>
<ul>
<li>selects which process should be executed next and allocates CPU</li>
<li>å› ä¸ºå…¶æ‰§è¡Œååˆ†é¢‘ç¹ï¼Œæ‰€ä»¥æ¯æ¬¡é€‰æ‹©ä¸èƒ½è€—æ—¶å¤ªé•¿ï¼Œå¦åˆ™å°±overhead</li>
</ul>
<ol start="3">
<li>Medium-term scheduler Or swapping</li>
</ol>
<ul>
<li>swap out: removes processes from memory to disk and reduces the degree of multiprogramming</li>
<li>swap in: introduce process into memory</li>
</ul>
</li>
<li>
<p>Context Switch</p>
<ul>
<li>CPU switches to another process</li>
</ul>
</li>
</ul>
<h3 id="operations-on-processes">Operations on Processes</h3>
<ol>
<li>fork()
<ul>
<li>The new process consists of a copy of the address space of the original process</li>
<li>The return code for the fork() is zero for the child process</li>
<li>å­è¿›ç¨‹ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„åœ°å€ç©ºé—´å’Œèµ„æºï¼Œä½†å¹¶ä¸ä¼šå¤åˆ¶çˆ¶è¿›ç¨‹çš„çº¿ç¨‹</li>
</ul>
</li>
</ol>
<h3 id="interprocess-communication">Interprocess Communication</h3>
<ul>
<li>Shared memory</li>
<li>Message passing</li>
</ul>
<h3 id="åè¯è§£é‡Š">åè¯è§£é‡Šï¼š</h3>
<ul>
<li>multiprogrammingï¼š is to have some process running at all times, to maximize CPU utilization</li>
<li>time sharing ï¼š is to switch the CPU among processes so frequently that users can interact with each process</li>
</ul>
<h2 id="chapter-4-thread">Chapter 4 Thread</h2>
<ul>
<li>è¿›ç¨‹ vs çº¿ç¨‹
<ul>
<li>çº¿ç¨‹æ˜¯CPUçš„åˆ†å¸ƒå•ä½</li>
<li>è¿›ç¨‹æ˜¯èµ„æºçš„åˆ†å¸ƒå•ä½</li>
<li>çº¿ç¨‹æ˜¯è¿›ç¨‹ä¸­çš„æ‰§è¡Œå•å…ƒ
<ul>
<li>ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´å’Œç³»ç»Ÿèµ„æºï¼Œå¦‚open files, signalsã€‚</li>
<li>æ¯ä¸ªçº¿ç¨‹æœ‰è‡ªå·±çš„æ ˆç©ºé—´å’Œæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä½†å®ƒä»¬åœ¨åŒä¸€ä¸ªè¿›ç¨‹å†…å…±äº«ä»£ç æ®µã€æ•°æ®æ®µå’Œå †ç­‰èµ„æºã€‚</li>
</ul>
</li>
</ul>
</li>
<li>benefits of multithreaded programming
<ol>
<li>Responsiveness</li>
<li>Resource sharing</li>
<li>Economy</li>
<li>utilization of multiprocessor architectures</li>
</ol>
</li>
</ul>
<h3 id="multithreading-models">Multithreading Models</h3>
<ul>
<li>
<p>ä¸¤ç§çº¿ç¨‹</p>
<ul>
<li>User Threads
<ul>
<li>Provided by a thread library at the user level</li>
</ul>
</li>
<li>Kernel Threads
<ul>
<li>Provided and managed by the OS directly</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Relationship between kernel threads and user threads</p>
<ol>
<li>Many-to-one model</li>
<li>One-to-one model-</li>
<li>Many-to-many model</li>
<li>Two-level Model
<ul>
<li>ä¸»ä½“æ˜¯Many-to-many model</li>
<li>A user thread (important task) can be bound to a kernel thread</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Two versions of fork() in UNIX systems</p>
<ol>
<li>To duplicate all the threads
<ul>
<li>If exec() is not called after forking, then to duplicate all threads</li>
</ul>
</li>
<li>To only duplicate the thread that invoked the fork() system call
<ul>
<li>If exec() is called immediately after forking, then only to duplicate the calling threads</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="chapter-5-cpu-scheduling">Chapter 5 CPU Scheduling</h2>
<h3 id="basic-concepts">Basic Concepts</h3>
<ul>
<li>CPU scheduling decisions may take place when a process:
<ol>
<li>Switches from running to waiting state
<ul>
<li>The result of  an I/O request</li>
<li>An invocation of wait for the termination of one of the child processes ï¼ˆe.g. wait(NULL);ï¼‰</li>
</ul>
</li>
<li>Switches from running to ready state
<ul>
<li>When a interrupt occurs</li>
</ul>
</li>
<li>Switches from waiting to ready
<ul>
<li>Completion of I/O</li>
</ul>
</li>
<li>Terminates</li>
</ol>
</li>
<li>Non-preemptive (éå‰¥å¤º)
<ul>
<li>Once the CPU has been allocated to a process, the process keeps the CPU until it releases the CPU</li>
<li>è°ƒåº¦åªå¯èƒ½å‘ç”Ÿåœ¨æƒ…å†µ 1. å’Œ 4.</li>
<li>ç®€å•ï¼Œç¡¬ä»¶è¦æ±‚ä½</li>
</ul>
</li>
<li>Preemptive(å‰¥å¤º)</li>
</ul>
<h3 id="scheduling-criteria">Scheduling Criteria</h3>
<ol>
<li>CPU utilization</li>
<li>CPU throughout
<ul>
<li>number of processes that complete their execution per time unit.</li>
</ul>
</li>
<li>Process turnaround time
<ul>
<li>From the time of submission of a process to the time of completion, include
<ul>
<li>Waiting to get into memory</li>
<li>Waiting in the ready queue</li>
<li>Executing on the CPU</li>
<li>Doing I/O</li>
</ul>
</li>
</ul>
</li>
<li>Process waiting time (ç­‰å¾…æ—¶é—´)
<ul>
<li>amount of time that a process spent waiting in the ready queue.</li>
</ul>
</li>
<li>Process response time (å“åº”æ—¶é—´)
<ul>
<li>amount of the time from the submission of a request until the first response/result is produced</li>
</ul>
</li>
</ol>
<h3 id="scheduling-algorithms">Scheduling Algorithms</h3>
<ol>
<li>First come first served (FCFS)
<ul>
<li>non-preemptive</li>
<li>Convoy effect (æŠ¤èˆªæ•ˆåº”)</li>
</ul>
</li>
<li>Shortest job first (SJF)
<ul>
<li>minimum average waiting time</li>
<li>ç§ç±»
<ol>
<li>Preemptive SJF allows to preempt the currently executing process</li>
<li>Non-preemptive</li>
</ol>
</li>
<li>æ¯”è¾ƒé€‚ç”¨äºé•¿ç¨‹è°ƒåº¦</li>
</ul>
</li>
<li>Priority scheduling
<ul>
<li>é—®é¢˜ï¼šstarvation</li>
<li>è§£å†³ï¼š Aging (æ—¶æ•ˆ) â€“ as time progresses increase the priority of the process</li>
</ul>
</li>
<li>Round robin (RR)
<ul>
<li>Is designed for especially for time-sharing systems</li>
<li>preemptive</li>
<li>time quantum
<ul>
<li>éœ€è¦ä¿è¯ 80%çš„cpu bursts &lt; the time quantum</li>
</ul>
</li>
<li>Response time = 2*(n-1)*q</li>
</ul>
</li>
<li>Multilevel queue algorithm</li>
<li>Multilevel feedback queue algorithm
<ul>
<li>the most general scheduling algorithm</li>
</ul>
</li>
</ol>
<h3 id="multiple-processor-scheduling">Multiple-Processor Scheduling</h3>
<ul>
<li>homogeneous vs. heterogeneous CPUs
<ul>
<li>homogeneous: å„å¤„ç†å™¨éƒ½ä¸€æ ·</li>
</ul>
</li>
<li>Approaches to multiple-processor scheduling
<ul>
<li>Asymmetric multiprocessing
<ul>
<li>only one processor (the master server) has all scheduling decision, I/O processing</li>
</ul>
</li>
<li>Symmetric multiprocessing
<ul>
<li>each processor is self-scheduling</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="chapter-6-process-synchronization">Chapter 6 Process synchronization</h2>
<ul>
<li>Race condition
<ul>
<li>The situation where several processes access and manipulate shared data concurrently.</li>
<li>The final value of the shared data depends upon which process finishes last.</li>
</ul>
</li>
</ul>
<h3 id="the-critical-section-problem">The Critical-Section Problem</h3>
<ul>
<li>
<p>critical section</p>
<ul>
<li>Each process has a code segment, called critical section, in which the shared data is accessed</li>
<li>æœ‰å‡ ä¸ªå…±äº«å˜é‡å°±æœ‰å‡ ä¸ªä¸´ç•ŒåŒº</li>
</ul>
</li>
<li>
<p>Criteria for the critical section problem solution</p>
<ol>
<li>Mutual exclusion äº’æ–¥</li>
<li>progress ç©ºé—²è®©è¿›</li>
<li>Bounded waiting æœ‰é™ç­‰å¾…</li>
</ol>
</li>
<li>
<p>Petersonâ€™s Solution</p>
<ul>
<li>ä¸¾æ‰‹+ä»¤ç‰Œ</li>
</ul>
</li>
<li>
<p>hardware-based solution</p>
<ul>
<li>å…³ä¸­æ–­
<ul>
<li>å¤šå¤„ç†æœºä¸é€‚åˆ</li>
</ul>
</li>
<li>åŸå­æ“ä½œ</li>
</ul>
</li>
</ul>
<h3 id="semaphores">Semaphores</h3>
<ul>
<li>
<p>A Semaphore S â€“ integer variable</p>
<ul>
<li>may be initialized via a non-negative value</li>
<li>Can only be accessed via two indivisible (atomic) operations: P() and V()</li>
</ul>
</li>
<li>
<p>P(): the wait() operation</p>
<pre tabindex="0"><code>wait (S) { 
  while (S.value &lt;= 0) ; 	// no-op
    S.value--;
}
</code></pre></li>
<li>
<p>V() The signal() operation</p>
<pre tabindex="0"><code>signal(S){
  S.value++;
}
</code></pre></li>
<li>
<p>main problem : busy waiting (spinlock)</p>
<ul>
<li>advantages
<ol>
<li>No context switch is required when a process must wait on a lock</li>
<li>If locks are expected to be held for short times, the spinlocks are useful</li>
</ol>
</li>
<li>disadvantages
<ol>
<li>wastes the CPU cycles that can be used by other processes productively</li>
</ol>
</li>
<li>è§£å†³ï¼šmodify the definition of the wait() and signal() <strong>é€‚ç”¨äº multiprocessor system</strong>
<ul>
<li>Wait(): the process can block() itself rather than engaging in busy waiting</li>
<li>Signal(): change the blocking process from the waiting state to the ready state</li>
</ul>
</li>
</ul>
</li>
<li>
<p>implementation</p>
<ol>
<li>In a single-processor environment</li>
</ol>
<ul>
<li>Disable interrupt</li>
</ul>
<ol start="2">
<li>In a multi-processor environment</li>
</ol>
<ul>
<li>Critical section can be applied</li>
</ul>
</li>
</ul>
<h2 id="chapter-7-deadlocks">Chapter 7 Deadlocks</h2>
<ul>
<li>Necessary conditions
<ol>
<li>Mutual exclusion</li>
<li>Hold and wait</li>
<li>No preemption</li>
<li>Circular wait</li>
</ol>
</li>
</ul>
<h3 id="methods-for-handling-deadlocks">Methods for Handling Deadlocks</h3>
<ol>
<li>
<p>Prevention</p>
<ul>
<li>Provides a set of methods for ensuring that at least one of necessary conditions cannot be held</li>
<li>é’ˆå¯¹æ¡ä»¶2ï¼š all or nothing; æ²¡æœ‰èµ„æºçš„æ—¶å€™æ‰å»ç”³è¯·</li>
<li>é’ˆå¯¹æ¡ä»¶3ï¼š è°¦è®©ï¼› æŠ¢å¤º</li>
<li>é’ˆå¯¹æ¡ä»¶4ï¼š é¡ºåºæ‰§è¡Œ</li>
<li>ç¼ºç‚¹ï¼š low device utilization and reduce system throughput.</li>
</ul>
</li>
<li>
<p>Avoidance</p>
<ul>
<li>using the addition information,decide whether the current request can be satisfied or must be delay</li>
<li>æ–¹æ³•ï¼š
<ol>
<li>Resource-allocation graph
<ul>
<li>æœ‰ç¯ï¼šå¤„äºunsafe state;å¯èƒ½å¤„äºæ­»é”çŠ¶æ€</li>
</ul>
</li>
<li>Banker&rsquo;s algorithm</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Detection and recovery</p>
<ul>
<li>æ–¹æ³•:
<ul>
<li>Wait-for graph
<ul>
<li>not appilcable to a resource-allocation system with multiple instances of each resource type</li>
</ul>
</li>
<li>Bankerâ€™s Algorithm</li>
</ul>
</li>
<li>When, and how often, to invoke detection algorithm. it depends on:
<ul>
<li>How often a deadlock is likely to occur?</li>
<li>How many processes will need to be rolled back?</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Ignorance</p>
</li>
</ol>
<h2 id="chapter-8">Chapter 8</h2>
<ul>
<li>
<p>Address may be represented in</p>
<ol>
<li>symbolic address</li>
<li>re-locatable address</li>
<li>absolute address</li>
</ol>
</li>
<li>
<p>address binding</p>
<ul>
<li>è½¬æ¢ï¼š
<ul>
<li>symbolic address -&gt; re-locatable address : compiler</li>
<li>re-locatable address -&gt; absolute address : linkage editor or loader</li>
</ul>
</li>
<li>å‘ç”Ÿçš„æ—¶æœŸ
<ol>
<li>Compile time
<ul>
<li>If memory location known at compile time, absolute code can be generated</li>
<li>If memory location is not known at compile time, Must generate re-locatable code</li>
</ul>
</li>
<li>Load time ï¼ˆ+linkage timeï¼‰
<ul>
<li>if memory location is known at load time, absolute code can be generated at this time</li>
</ul>
</li>
<li>Execution time
<ul>
<li>If memory location is not known at compile time and load time, Binding is delayed until run time</li>
<li>absolute code must be generated at run time</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="logical-vs-physical-address-space">Logical vs. Physical Address Space</h3>
<ul>
<li>
<p>Logical address ï¼šCPU</p>
<ul>
<li>also referred to as virtual address</li>
<li>é‡å®šä½åœ°å€å’Œé€»è¾‘åœ°å€æ²¡æœ‰ç›´æ¥å…³ç³»</li>
</ul>
</li>
<li>
<p>Physical address ï¼šmemory unit</p>
</li>
<li>
<p>logical (virtual) and physical addresses differ in execution-time address-binding scheme</p>
<ul>
<li>re-locatable code are seen by CPU</li>
<li>absolute code are seen by the memory unit</li>
</ul>
</li>
<li>
<p>Memory-Management Unit (MMU)</p>
<ul>
<li>Hardware device that maps virtual address to physical address in the run-time</li>
</ul>
</li>
<li>
<p>Dynamic load</p>
<ul>
<li>not loaded the entire program and data of a process be in physical memory for the process to execute until it is called</li>
<li>å¥½å¤„ï¼š
<ol>
<li>Better memory-space utilization</li>
<li>No special support is required from the operating system</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Dynamic linking</p>
<ul>
<li>Linking is postponed until execution time</li>
<li>requires help from the OS</li>
</ul>
</li>
</ul>
<h3 id="contiguous-memory-allocation">Contiguous Memory Allocation</h3>
<ol>
<li>Fixed-Sized Contiguous Partition
<ul>
<li>Strengths (advantages)
<ul>
<li>Simple to implement</li>
<li>little overhead</li>
</ul>
</li>
<li>Weaknesses(drawbacks)
<ul>
<li>internal fragmentation
<ul>
<li>allocated memory may be larger than requested memory</li>
</ul>
</li>
<li>fixed number of processes</li>
</ul>
</li>
</ul>
</li>
<li>Dynamic Contiguous partitionï¼ˆå¯å˜åˆ†åŒºï¼‰
<ul>
<li>Hole â€“ block of available memory</li>
<li>Allocation algorithms
<ol>
<li>first fit:
<ul>
<li>ä»å¤´å¼€å§‹ï¼Œæˆ–è€…æ˜¯ä»å½“å‰ä½ç½®å¼€å§‹</li>
</ul>
</li>
<li>best-fit
<ul>
<li>Need to search all entire list, unless the list is ordered by size</li>
<li>produces the smallest leftover hole that may be wasted</li>
</ul>
</li>
<li>worst-fit
<ul>
<li>Need to search all entire list, unless the list is ordered by size</li>
<li>å°è¿›ç¨‹å¤šçš„ æ•ˆæœå¥½</li>
</ul>
</li>
</ol>
</li>
<li>é—®é¢˜ï¼š
<ul>
<li>External Fragmentation</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li>
<p>Solutions to fragmentation</p>
<ol>
<li>Compaction(ç´§å‡‘)
<ul>
<li>To reduce external fragmentation</li>
<li>Shuffle memory contents to place all free memory together in one large block</li>
<li>It is done at execution timeï¼Œ itâ€™s possible only if relocation is dynamic</li>
<li>May be expensive in moving the processes and the holes</li>
</ul>
</li>
<li>paging</li>
<li>segmentation</li>
</ol>
</li>
<li>
<p>Disadvantage of Contiguous Memory Allocation</p>
<ul>
<li>Fragmentation in main memory</li>
<li>Compaction is impossible on the disk</li>
</ul>
</li>
</ul>
<h3 id="paging">paging</h3>
<ul>
<li>
<p>frame: Divide physical memory into fixed-sized blocks</p>
</li>
<li>
<p>page : Divide logical memory into fixed-sized blocks</p>
<ul>
<li>page size is equal to frame size</li>
<li>Finding n free frames for loading a program of size n pages</li>
</ul>
</li>
<li>
<p>Translating logical address to physical address
If the address space is 2^m and the page size is 2^n</p>
<ul>
<li>Every logical address generated by CPU is divided into:
<ol>
<li>Page number (p: é¡µå·)
<ul>
<li>used as an index into a page table</li>
<li>é¡µè¡¨ä¸­åŒ…å«æ¯ä¸€é¡µåœ¨physical memory çš„ base address (f:å—å·)</li>
<li>p =address/2^n   is equal to m-n bit of the address</li>
</ul>
</li>
<li>Page offset (d: åç§»)
<ul>
<li>combined with base address (f:å—å·) to define the physical memory address that is sent to the memory unit</li>
<li>d =address%2n is equal to n bit of the address</li>
</ul>
</li>
</ol>
</li>
<li>Physical address
<ol>
<li>frame numberï¼ˆf: å¸§å·ã€å—å·)</li>
<li>page offset      (d:é¡µåç§»ã€å—åç§»)</li>
</ol>
</li>
</ul>
</li>
<li>
<p>page sizeçš„é€‰æ‹©</p>
<ul>
<li>è¶Šå¤§ï¼š
<ul>
<li>Disk I/O is more efficient</li>
<li>page table size è¶Šå°</li>
</ul>
</li>
<li>è¶Šå°ï¼š
<ul>
<li>internal fragmentation è¶Šå°</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Frame table (ä¸»å­˜åˆ†å—è¡¨)</p>
<ul>
<li>Has one entry for each physical page frame
Indicating
<ul>
<li>whether the frame is free or it is allocated to which process</li>
</ul>
</li>
</ul>
</li>
<li>
<p>page table</p>
<ul>
<li>each process must maintain a copy of the page table</li>
<li>è®¡ç®—
<ul>
<li>if page-table entry is 4 bytes long
<ul>
<li>Can point to one of 2^32 physical page frames (1æ¯”ç‰¹=8å­—èŠ‚)</li>
<li>If frame size(= page size) is 4KB, the system can address 2^44 bytes(2^32Ã—2^12=16TB) of physical memory</li>
</ul>
</li>
<li>å¯¹äº32ä½cpu
<ul>
<li>page size: 4k (=2^12)</li>
<li>Table sizeï¼š2^32/2^12=1M</li>
<li>each entry&rsquo;s size : 4 bytes</li>
<li>page table çš„å¤§å°ä¸ºï¼š 4 MB</li>
</ul>
</li>
</ul>
</li>
<li>ä½ç½®
<ol>
<li>ç›´æ¥å­˜æ”¾åœ¨å¯„å­˜å™¨ä¸­ï¼š
<ul>
<li>Efficient and expensive</li>
<li>å½“page table is reasonable small æ—¶å¯ä»¥</li>
</ul>
</li>
<li>å­˜æ”¾åœ¨main memory ï¼Œç„¶åç”¨Page-table base register (PTBRï¼šé¡µè¡¨åŸºå€å¯„å­˜å™¨)å­˜æ”¾å…¶ä½ç½®
<ul>
<li>è¿›ç¨‹åˆ‡æ¢æ—¶ï¼ŒåŠ è½½é¡µè¡¨åªéœ€è¦æ”¹å˜PTBR</li>
<li>every data/instruction access requires two memory accesses
<ul>
<li>One for the page table</li>
<li>One for the data/instruction</li>
</ul>
</li>
</ul>
</li>
<li>Translation Look-aside Buffer (TLB) also called Associate Memory(è”æƒ³å¯„å­˜å™¨)
<ul>
<li>å¹¶è¡ŒæŸ¥æ‰¾</li>
<li>contains only a few of page-table entries</li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="structure-of-the-page-table">Structure of the Page Table</h3>
<ul>
<li>é—®é¢˜: The page table can be excessively large</li>
<li>Solutionï¼š Divide the page table into smaller pieces
<ol>
<li>Hierarchical Paging ï¼ˆåˆ†å±‚é¡µè¡¨ï¼‰</li>
<li>Hashed Page Tablesï¼ˆå“ˆå¸Œé¡µè¡¨ï¼‰</li>
<li>Inverted Page Tablesï¼ˆåç½®é¡µè¡¨ï¼‰</li>
</ol>
</li>
</ul>
<ol>
<li>Hierarchical Paging ï¼ˆåˆ†å±‚é¡µè¡¨ï¼‰
<ul>
<li>ç¼ºé™·ï¼š</li>
</ul>
<ol>
<li>éœ€éå†ï¼Œè¿›ç¨‹å¤ªå¤š</li>
<li>å¯èƒ½æœ‰å…±äº«ï¼Œè€Œè¿›ç¨‹å·åªèƒ½å¡«ä¸€ä¸ª</li>
<li>ä¸é€‚ç”¨äº64ä½</li>
</ol>
<ul>
<li>å¥½ï¼š
<ol>
<li>éœ€è¦çš„ç©ºé—´å°</li>
</ol>
</li>
</ul>
</li>
<li>Hashed Page Tables
<ul>
<li>hash table -&gt; åœ¨é“¾è¡¨ä¸­éå†åŒ¹é…</li>
</ul>
</li>
<li>Inverted Page Table(åç½®é¡µè¡¨/ä¸»å­˜åˆ†å—è¡¨)</li>
</ol>
<ul>
<li>Only a page table in the system</li>
<li>One entry for each real page (or physical frame) of memory</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>increases time needed to search the table when a page reference occurs</li>
<li>Lead to memory share difficulty</li>
</ul>
</li>
</ul>
<h3 id="segmentation">segmentation</h3>
<ul>
<li>Userâ€™s View of a Program: A program is a collection of segmentsï¼Œa segment is a logical unit such as:
<ul>
<li>main program
<ul>
<li>procedure ï¼Œfunctionï¼Œmethodï¼Œobject</li>
<li>local variables, global   variables</li>
<li>common block</li>
<li>stack</li>
<li>symbol table</li>
<li>arrays</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="chapter-9-virtual-memory">Chapter 9 Virtual Memory</h2>
<ul>
<li>
<p>the entire program is not needed to be in physical memory.è¿™æ ·çš„å¥½å¤„æœ‰ï¼š</p>
<ul>
<li>ç¨‹åºçš„å¤§å°ä¸å†å—å†…å­˜æ‰€é™åˆ¶</li>
<li>æ›´å¤šç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œ</li>
<li>Less I/O would be needed to load or swap each user program into memory, so program would start to run faster</li>
</ul>
</li>
<li>
<p>Virtual memory management</p>
<ul>
<li>a term used to describe a technique whereby the computer appears to have much more memory than it actually does</li>
</ul>
</li>
<li>
<p>Virtual memory can be implemented via:</p>
<ul>
<li>Demand paging</li>
<li>Demand segmentation</li>
</ul>
</li>
</ul>
<h3 id="demand-paging">Demand paging</h3>
<ul>
<li>
<p>æ€æƒ³ï¼š Bring a page into memory only when it is needed</p>
<ul>
<li>Be similar to a paging system with swapping</li>
</ul>
</li>
<li>
<p>Hardware</p>
<ul>
<li>Page table. éœ€è¦åŠ ä¸€ä½validâ€“invalid bit
<ul>
<li>v -ã€‹ The page is legal and in memory</li>
</ul>
</li>
<li>Secondary memory
<ul>
<li>A high-speed disk, Swap space</li>
<li>Hold those page that are not present in memory</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Page Fault</p>
<ul>
<li>Access to a page marked invalid causes a page-fault trap</li>
<li>handle
<ol>
<li>Operating system looks at another table (PCB) to decide:
<ul>
<li>Invalid reference -&gt; abort</li>
<li>Just not in memory	ï¼ˆgo on to 2ï¼‰ï¼‰</li>
</ul>
</li>
<li>Get empty frame</li>
<li>Swap the desired page into the frame</li>
<li>modify the page table, Set validation bit = v</li>
<li>Restart the instruction that caused the page fault</li>
</ol>
</li>
<li>ç‰¹æ®Šï¼š
<ol>
<li>ä¸€æ¡æŒ‡ä»¤å¯äº§ç”Ÿå¤šä¸ªç¼ºé¡µä¸­æ–­</li>
<li>æŒ‡ä»¤å¤æ‰§</li>
<li>åœ¨æŒ‡ä»¤æ‰§è¡Œæ—¶ä¸­æ–­ã€‚</li>
</ol>
</li>
<li>å¯¹æ¯”æ™®é€šä¸­æ–­ï¼š
<ul>
<li>ä¸€æ¡æŒ‡ä»¤åœ¨æ‰§è¡Œå®Œåï¼Œæ£€æŸ¥æ˜¯å¦æœ‰ä¸­æ–­è¯·æ±‚
<ul>
<li>æœ‰ï¼šæ‰§è¡Œä¸­æ–­</li>
<li>æ— ï¼šæ‰§è¡Œä¸‹ä¸€æ¡æŒ‡ä»¤</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="page-replacement">Page Replacement</h3>
<p><strong>æ›¿æ¢ç®—æ³•</strong></p>
<ol>
<li>
<p>FIFO page Replacement</p>
<ul>
<li>Beladyâ€™s Anomaly : more frames -&gt; more page faults</li>
</ul>
</li>
<li>
<p>Optimal Page Replacement (OPT)</p>
<ul>
<li>æ›¿æ¢æœ€æ™šæ‰ç”¨çš„é¡µ æˆ– åé¢æœ€é•¿æ—¶é—´ç”¨ä¸åˆ°çš„é¡µ</li>
</ul>
</li>
<li>
<p>Least Recently Used (LRU) Algorithm</p>
<ul>
<li>æ€æƒ³ï¼š The recent past as an approximation of the near future</li>
<li>å®ç°ï¼š</li>
<li>counters</li>
<li>stack</li>
</ul>
</li>
<li>
<p>LRU Approximation Algorithms</p>
<ol>
<li>Additional-reference-bits algorithm</li>
<li>Second chance (clock)</li>
<li>Enhanced second-chance algorithm</li>
</ol>
</li>
<li>
<p>Counting-Based Page Replacement</p>
<ul>
<li>Least Frequently used</li>
<li>Most Frequently used</li>
</ul>
</li>
<li>
<p>Page-Buffering Algorithm</p>
<ul>
<li>Assistant procedure to a page-replacement algorithm</li>
</ul>
</li>
</ol>
<h3 id="allocation-of-frames">Allocation of Frames</h3>
<ul>
<li>
<p>Two major allocation schemes</p>
<ol>
<li>fixed allocation
<ul>
<li>Equal allocation</li>
<li>Proportional allocation</li>
</ul>
</li>
<li>priority allocation
<ul>
<li>Use a proportional allocation scheme using priorities rather than size</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Global vs. Local Allocation</p>
<ol>
<li>Local replacement
<ul>
<li>To allow a process to select from only its own set of allocated frames.</li>
<li>Cannot increase the number of frames allocated</li>
<li>Not affected by external circumstances</li>
</ul>
</li>
<li>Global replacement
<ul>
<li>To allow a process to select a replacement frame from the set of all frames, even if that frame is currently allocated to some other process</li>
<li>Can increase the number of frames allocated</li>
<li>Cannot control its page-fault rate.</li>
</ul>
</li>
</ol>
<ul>
<li>In general, global replacement is better.</li>
</ul>
</li>
</ul>
<h3 id="thrashing">Thrashing</h3>
<ul>
<li>A process is thrashing ï¼ˆé¢ ç°¸ï¼‰if it is spending more time paging than executing</li>
<li>approach
<ol>
<li>Using a local replacement algorithm</li>
<li>Working-set strategy
<ul>
<li>To compute the working-set size for each process in the system</li>
</ul>
</li>
<li>Page-Fault Frequency (PFF) Scheme  (æ°´å¤šäº†åŠ é¢ï¼Œé¢å¤šäº†åŠ æ°´)
<ul>
<li>If actual rate too low, remove  a frame from the process</li>
<li>If actual rate too high, allocate another frame to the process</li>
<li>If no frames are free, suspend it</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="other-considerations">Other Considerations</h3>
<ul>
<li>page size å¤§å°çš„é€‰æ‹©è¦è€ƒè™‘åˆ°ï¼š
<ol>
<li>å†…ç¢ç‰‡</li>
<li>é¡µè¡¨çš„å¤§å°</li>
<li>I/O overhead (seek time, latency time, transfer time)</li>
<li>Locality</li>
<li>Page fault rate
<ul>
<li>é¡ºåºè®¿é—®ï¼š page sizeè¶Šå¤§ï¼Œåˆ™ç¼ºé¡µä¸­æ–­ç‡è¶Šå°</li>
<li>éšæœºè®¿é—®ï¼š page sizeè¶Šå¤§ï¼Œåˆ™more paging action could ensue because fewer pages can be kept in memory and more data is transferred per page fault.</li>
</ul>
</li>
</ol>
</li>
<li>Install a faster hard disk, or multiple controllers with multiple hard disks
<ul>
<li>for as the disk bottleneck is removed by faster response and more throughput to the disks, the CPU will get more data more quickly</li>
</ul>
</li>
</ul>
<h2 id="chapter-10-file-system-interface">Chapter 10 File-System Interface</h2>
<ul>
<li>File
<ul>
<li>A file is named collection of related information that is recorded on secondary storage</li>
<li>Six basic operations
<ol>
<li>create</li>
<li>read/write/seek</li>
<li>delete</li>
<li>truncate: to erase the contents of a file but keep its attributes except for itâ€™s length</li>
</ol>
</li>
<li>Assistant operations
<ul>
<li>open(F):
<ol>
<li>search the directory structure on disk for entry F</li>
<li>copy the directory entry into the open-file table</li>
<li>allocate a file descriptor</li>
</ol>
</li>
<li>close(F):
<ol>
<li>copy the directory entry in the open-file table to the directory structure on disk</li>
<li>free the file descriptor</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="access-methods">Access Methods</h3>
<ul>
<li>The information in the file can be accessed in
<ol>
<li>sequentical access</li>
<li>direct access</li>
<li>other access
<ul>
<li>involve the construction of an index for the file</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="directory-structure">Directory Structure</h3>
<ul>
<li>
<p>symbol table</p>
<ul>
<li>The directory can be viewed as a symbol table that translates file names into their directory entries</li>
</ul>
</li>
<li>
<p>Criteria</p>
<ol>
<li>efficiency</li>
<li>naming</li>
<li>grouping</li>
</ol>
</li>
<li>
<p>shemes</p>
<ol>
<li>Single-Level Directory</li>
<li>Two-Level Directory
<ul>
<li>Positive
<ul>
<li>Efficient searching</li>
</ul>
</li>
<li>Negative
<ul>
<li>No grouping capability</li>
<li>Difficult to share file among different users</li>
</ul>
</li>
</ul>
</li>
<li>Tree-Structured Directories
<ul>
<li>Positive
<ul>
<li>Efficient searching</li>
<li>Grouping Capability</li>
</ul>
</li>
<li>Negative
<ul>
<li>Difficult to share file among different users</li>
</ul>
</li>
</ul>
</li>
<li>Acyclic-Graph Directories
<ul>
<li>Tree-structured directory + shared subdirectories or files</li>
<li>Created a new directory entry  called a link to implement sharing</li>
<li>The difficulty is to avoid cycles as new links are added</li>
</ul>
</li>
<li>General Graph Directory
<ul>
<li>Add the links to an existing tree-structure directory</li>
<li>Acyclic-Graph Directoriesæ›´å¥½</li>
</ul>
</li>
</ol>
</li>
<li>
<p>ç¡¬ï¼ˆhardï¼‰é“¾æ¥</p>
<ul>
<li><code>ln /usr/local/python3 python</code></li>
<li>ç›®å½•ä¸­ä»…å­˜å‚¨æŒ‡å‘æ–‡ä»¶æ•°æ®çš„æŒ‡é’ˆ</li>
<li>å…è®¸ä¸€ä¸ªæ–‡ä»¶è¢«å¤šä¸ªç›®å½•å¼•ç”¨.</li>
<li>æ— æ³•ç”¨æ¥é“¾æ¥ç›®å½•ï¼Œä¹Ÿä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿ</li>
<li>é€šè¿‡<code>ls -i</code>æŸ¥çœ‹æ˜¯å¦ä¸ºç¡¬é“¾æ¥</li>
</ul>
</li>
<li>
<p>è½¯ (symbolic) é“¾æ¥</p>
<ul>
<li>â€œå¿«æ·æ–¹å¼â€</li>
<li>è½¯é“¾æ¥ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶</li>
<li><code> ln -s ../p24 p24</code></li>
<li>ç›®å½•ä»â€œæ ‘â€å˜ä¸ºäº†â€œå›¾â€ï¼Œè¿˜æ˜¯æœ‰ç¯å›¾</li>
</ul>
</li>
<li>
<p>ACL: access-control list</p>
<ul>
<li>Each file or directory has an ACL</li>
</ul>
</li>
</ul>
<h2 id="file-system-implementation">File-System Implementation</h2>
<ul>
<li>File system organized into layers
<ol>
<li>application program</li>
<li>logical file system
<ul>
<li>FCB: file control blocks</li>
</ul>
</li>
<li>file-organizational module</li>
<li>basic file system</li>
<li>I/O control</li>
<li>devices</li>
</ol>
</li>
</ul>
<h3 id="allocation-methods">Allocation Methods</h3>
<ul>
<li>
<p>An allocation method refers to how disk blocks are allocated for files</p>
</li>
<li>
<p>Contiguous allocation</p>
<ul>
<li>Each file occupies a set of contiguous blocks on the disk</li>
<li>Supports both sequential access and direct access ï¼ˆRandom accessï¼‰</li>
<li>é—®é¢˜ï¼š
<ol>
<li>External fragmentation</li>
<li>Files cannot grow</li>
</ol>
</li>
</ul>
</li>
<li>
<p>Linked allocation</p>
<ul>
<li>Each file is a linked list of disk blocks: blocks may be scattered anywhere on the disk</li>
<li>ä¼˜ç‚¹
<ol>
<li>å®¹æ˜“å®ç°</li>
<li>æ— å¤–ç¢ç‰‡</li>
<li>æ–‡ä»¶å¢é•¿æ–¹ä¾¿</li>
</ol>
</li>
<li>ç¼ºç‚¹ï¼š
<ol>
<li>No random access</li>
<li>Poor reliability</li>
<li>æ…¢ï¼ˆé“¾è¡¨æ˜¯ä¿å­˜åœ¨ç£ç›˜ä¸Šçš„ï¼Œæ‰€ä»¥éœ€è¦å¤šæ¬¡æŸ¥è¯¢ï¼‰</li>
</ol>
</li>
<li>æ”¹è¿›ï¼š File-allocation table (FAT)
<ul>
<li>æŠŠé“¾è¡¨ä¿¡æ¯æ”¾åˆ°äº†ä¸€ä¸ªå•ç‹¬çš„FATè¡¨ä¸­ï¼Œè€Œä¸æ˜¯å„ä¸ªæ•°æ®å—ä¸­ï¼Œä¸”è¿›è¡Œå¤‡ä»½</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Indexed allocation</p>
<ul>
<li>
<p>Bringing all the pointers together into one location: index block</p>
</li>
<li>
<p>Solutions to large files</p>
<ol>
<li>Linked sheme
<ul>
<li>Link blocks of index table</li>
</ul>
</li>
<li>Multilevel index</li>
<li>Combined scheme
<ul>
<li>ä¸€éƒ¨åˆ†æ˜¯ direct pointers ï¼Œä¸€éƒ¨åˆ†æ˜¯multi-indirect block</li>
</ul>
</li>
</ol>
</li>
<li>
<p>Criteria</p>
<ol>
<li>storage utilization efficiency</li>
<li>data block access time</li>
</ol>
<ul>
<li>Contiguous allocation: Good for known-size file</li>
<li>Linked allocation: Good for storage utilization</li>
<li>Indexed allocation: Access time depends on index structure, file size, block position</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="free-space-management">Free-Space Management</h3>
<ul>
<li>The free-space list çš„å®ç°
<ol>
<li>Bit vector
<ul>
<li>ä¼˜ç‚¹
<ul>
<li>Simple to implement</li>
<li>Efficient to find the first free block</li>
</ul>
</li>
<li>ç¼ºç‚¹
<ul>
<li>Bit map requires extra space</li>
<li>Inefficient unless the entire vector is kept in main memory</li>
</ul>
</li>
</ul>
</li>
<li>Linked Lists (free list)
<ul>
<li>ä¼˜ç‚¹
<ul>
<li>No waste of space</li>
</ul>
</li>
<li>ç¼ºç‚¹
<ul>
<li>Inefficient when traversing the list</li>
</ul>
</li>
</ul>
</li>
<li>Grouping</li>
</ol>
<ul>
<li>The first free block store the addresses of n free blocks</li>
<li>Easier to find a large number of free blocks</li>
</ul>
</li>
</ul>
<h2 id="mass-storage-systems">Mass-Storage Systems</h2>
<ul>
<li>
<p>Magnetic disk&rsquo;s structure</p>
<ul>
<li>Disk platter</li>
<li>track</li>
<li>sector
<ul>
<li>each track is subdivided into several sectors</li>
</ul>
</li>
<li>cylinder
<ul>
<li>is the set of tracks that are at one arm position</li>
</ul>
</li>
</ul>
</li>
<li>
<p>CLV vs. CAV</p>
<ol>
<li>ClV : constant linear velocity
<ul>
<li>CD-ROMï¼Œ DVD-ROM</li>
<li>Tracks in the outermost zone hold more sectors</li>
</ul>
</li>
<li>CAV : constant angular velocity
<ul>
<li>Magnetic disk</li>
<li>The density of bits decreases from inner tracks to outer tracks to keep the data rate constant</li>
</ul>
</li>
</ol>
</li>
</ul>
<h3 id="disk-scheduling">Disk Scheduling</h3>
<ul>
<li>Access time
<ol>
<li>Seek time is the time for the disk are to move the heads to the cylinder containing the desired sector
<ul>
<li>Seek time ï‚» seek distance</li>
</ul>
</li>
<li>Rotational latency
<ul>
<li>waiting for the disk to rotate the desired sector to the disk head</li>
</ul>
</li>
</ol>
</li>
<li>Disk bandwidth
<ul>
<li>The total number of bytes transferred / the total time  between the first request for service and the completion of the last transfer</li>
</ul>
</li>
</ul>
<ol>
<li>FCFS Scheduling</li>
<li>SSTFï¼šShortest-seek-time-first (SSTF)
<ul>
<li>æœ€çŸ­å¯»é“æ—¶é—´ä¼˜å…ˆ</li>
<li>é—®é¢˜ï¼š
<ul>
<li>å¾€è¿”è·‘&mdash;è·ç¦»å¾ˆçŸ­ï¼Œä½†é€Ÿåº¦ä¸ä¸€å®šå¾ˆå¿«</li>
<li>may cause starvation of some requests</li>
</ul>
</li>
</ul>
</li>
<li>SCAN</li>
</ol>
<ul>
<li>Sometimes called the elevator algorithm</li>
</ul>
<ol start="4">
<li>C-SCAN (Circular SCAN)</li>
</ol>
<ul>
<li>The head moves from one end of the disk to the other, servicing requests as it goes</li>
<li>When it reaches the other end, however, it immediately returns to the beginning of the disk, without servicing any requests on the return trip</li>
<li>å›é€”ä¸è½½å®¢</li>
</ul>
<ol start="5">
<li>LOOK / C-LOOK</li>
</ol>
<ul>
<li>
<p>Similar to SCAN/C-SCAN</p>
</li>
<li>
<p>Arm only goes as far as the last request in each direction, then reverses direction immediately, without first going all the way to the end of the disk.</p>
</li>
<li>
<p>é€‰æ‹©
<strong>Performance depends on the number and types of requests</strong></p>
<ul>
<li>SCAN and C-SCAN perform better for systems that place a heavy load on the disk</li>
<li>Either SSTF or LOOK is a reasonable choice for the default algorithm</li>
</ul>
</li>
</ul>
<h3 id="disk-management">Disk Management</h3>
<ul>
<li>Disk formatting
<ul>
<li>Low-Level Formatting (physical formatting )
<ul>
<li>Dividing a disk into sectors that the disk controller can read and write</li>
</ul>
</li>
<li>logical Formatting
<ul>
<li>Creation of a file system</li>
<li>Build the metadata structures for a file system</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="raid-structure">RAID Structure</h3>
<ul>
<li>
<p>Redundant Array of Inexpensive Disks (past)</p>
</li>
<li>
<p>Redundant Array of Independent Disks (now)</p>
<ul>
<li>Used for their higher reliability and higher data-transfer rate(performance)</li>
</ul>
</li>
<li>
<p>levels</p>
<ol>
<li>RAID 0
<ul>
<li>Disk arrays with data striping at the level of blocks but without any redundancy</li>
</ul>
</li>
<li>RAID 1
<ul>
<li>Disk mirroring</li>
</ul>
</li>
<li>RAID 2
<ul>
<li>Bit-level striping or Byte-level striping</li>
<li>Memory-style error-correcting-code (ECC)</li>
</ul>
</li>
<li>RAID 3
<ul>
<li>Bit-interleaved parity</li>
</ul>
</li>
<li>RAID 4
<ul>
<li>Block-interleaved parity organization</li>
</ul>
</li>
<li>RAID 5
<ul>
<li>Block-interleaved distributed parity</li>
</ul>
</li>
</ol>
</li>
</ul>
<hr>
<h2 id="å¸¸ç”¨å•è¯">å¸¸ç”¨å•è¯</h2>
<ul>
<li>simultaneously : åŒæ—¶åœ°</li>
<li>idle : ç©ºé—²ï¼Œæ‡’</li>
<li>reside : ä½äºï¼Œå±…ä½</li>
<li>uni-processor : å•å¤„ç†å™¨</li>
<li>interleave: äº¤ç»‡</li>
<li>allocation : åˆ†é…</li>
<li>dashed line ï¼š è™šçº¿</li>
<li>minuscule : å¾®å°çš„</li>
<li>concrete : å…·ä½“çš„</li>
<li>mandatory: å¼ºåˆ¶çš„</li>
<li>mediate : è°ƒè§£</li>
<li>strip : è„±æ‰ï¼›æ¡</li>
</ul>
]]></content:encoded>
    </item>
    
    <item>
      <title>Linuxå­¦ä¹ ç¬”è®°</title>
      <link>https://euds63.github.io/2023/linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</link>
      <pubDate>Sun, 19 Mar 2023 18:38:50 +0800</pubDate>
      
      <guid>https://euds63.github.io/2023/linux%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</guid>
      <description>Linuxå­¦ä¹ ç¬”è®°</description>
      <content:encoded><![CDATA[<h2 id="linuxå‘½ä»¤">Linuxå‘½ä»¤</h2>
<ul>
<li><code>ctrl + C</code> æ‰“æ–­æ‰§è¡Œ</li>
<li><code>pwd</code> è¾“å‡ºå½“å‰ä½ç½®</li>
<li><code>cmd1;cmd2</code> é¦–å…ˆè¿è¡Œå‘½ä»¤1ï¼Œç„¶åè¿è¡Œå‘½ä»¤2</li>
<li><code>cmd1&amp;&amp;cmd2</code> ä»…åœ¨å‘½ä»¤1æˆåŠŸç»“æŸæ—¶æ‰è¿è¡Œå‘½ä»¤2</li>
<li><code>cmd1||cmd2</code> ä»…å½“å‘½ä»¤1å¤±è´¥æ—¶æ‰è¿è¡Œå‘½ä»¤2</li>
<li><code>strace</code>  è¿½è¸ªç¨‹åºç³»ç»Ÿè°ƒç”¨</li>
<li><code>touch</code> æ–°å»ºæ–‡ä»¶,å†…å®¹ä¸ºç©º</li>
<li><code>cat</code>
<ul>
<li><code>cat filename</code> To view a single file</li>
<li><code>cat [filename-whose-contents-is-to-be-copied] &gt; [destination-filename]</code> Copy the contents of one file to another file.</li>
<li><code>cat file1 &gt;&gt; file2</code> Cat command can append the contents of one file to the end of another file.</li>
</ul>
</li>
<li>ç®¡é“ï¼›ç”¨<code>|</code>è¿æ¥ä¸¤ä¸ªå‘½ä»¤ï¼Œä»¥å‰é¢ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºä½œä¸ºåé¢å‘½ä»¤çš„è¾“å…¥
<ul>
<li><code>strace -f gcc a.c 2&gt;&amp;1 | vim -</code> This will pipe both stdout and stderr to vim. The <code>-</code> argument tells vim to read from stdin.</li>
<li><code>strace pmap 152 |&amp; vim - </code>
<code>|&amp;</code> : This is a shorthand for <code>2&gt;&amp;1 |</code> in bash and zsh. It passes both standard output and standard error of one command as input to another.</li>
</ul>
</li>
<li><code>sort -nk 6</code> ä¾ç¬¬6åˆ—å‡åºæ’åˆ—</li>
<li>æ‰§è¡Œå¤šæ¬¡ï¼Œæˆ–å¾ªç¯æ‰§è¡Œ
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1">#for i in {1..5}; do  // while true; do</span>
</span></span><span class="line"><span class="cl">&gt;  <span class="nb">command</span> 
</span></span><span class="line"><span class="cl">&gt;done
</span></span></code></pre></div></li>
<li>crontabçš„ä½¿ç”¨
<ul>
<li><code>crontab -e</code></li>
<li>æ³¨æ„ï¼šcrontabè¿è¡Œçš„ç¯å¢ƒå¹¶ä¸åŒ…å«dockerå‘½ä»¤ã€‚éœ€è¦æŒ‡å®šå®Œæ•´çš„è·¯å¾„ã€‚</li>
</ul>
</li>
<li><code>lsof -i:ç«¯å£å·</code>æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ</li>
<li><code>kill -9 PID</code> æ€æ‰å¯¹åº”çš„è¿›ç¨‹</li>
<li><code>grep</code> (global regular expression)  ç”¨äºæŸ¥æ‰¾æ–‡ä»¶é‡Œç¬¦åˆæ¡ä»¶çš„å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼</li>
<li><code>which</code> æŸ¥æ‰¾å®‰è£…è·¯å¾„ å¦‚<code>which docker</code></li>
<li><code>ls -l</code> è¯¦ç»†ä¿¡æ¯</li>
<li><code>~/.bashrc</code>æ˜¯ Bash shell åœ¨æ¯æ¬¡å¯åŠ¨æ—¶éƒ½ä¼šè‡ªåŠ¨æ‰§è¡Œçš„ä¸€ä¸ªè„šæœ¬æ–‡ä»¶,å¯ä»¥ç”¨äºè®¾ç½®ç¯å¢ƒå˜é‡ã€åˆ«åå’Œä¸€äº›å…¶ä»– Bash shell é…ç½®ã€‚
<ul>
<li><code>source /opt/rh/devtoolset-9/enable</code> æ›´æ–°gccç‰ˆæœ¬</li>
<li>export PS1=&rsquo;[][\W]$ []&rsquo; ä¿®æ”¹PS1å˜é‡ï¼Œè®©å…¶æ›´åŠ ç®€æ´ã€‚PS1çš„é»˜è®¤è®¾ç½®ä¸º<code>\[\][\u@\h \W]\$ \[\]</code></li>
</ul>
</li>
<li><code>tar</code>
<ul>
<li><code>tar cvf file.tar *.c</code> creates a tar file called file.tar which is the Archive of all .c files in current directory.</li>
<li><code>tar xvf file.tar</code> extracts files from Archives.</li>
<li><code>z</code>tells tar command that creates tar file using gzip å³<code>tar.gz</code></li>
</ul>
</li>
<li>å¯ä»¥åˆ©ç”¨ TAB è¡¥å…¨æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„å‘½ä»¤é€‰é¡¹(è¿æŒ‰ä¸¤æ¬¡ TAB é”®)</li>
</ul>
<h2 id="æ±‡ç¼–ç›¸å…³">æ±‡ç¼–ç›¸å…³</h2>
<ul>
<li><code>objdump -d filename</code> print the assembler content of the sections capable of execution.</li>
<li><code>objdump -s filename</code>  print the complete content of all the sections of the file</li>
</ul>
<h2 id="gcc">gcc</h2>
<ul>
<li><code>gcc - E a.c</code> å¯¹a.cè¿›è¡Œå®å±•å¼€</li>
<li>å‡çº§gccç‰ˆæœ¬åˆ°gcc9 <a href="https://blog.csdn.net/xunye_dream/article/details/108918316"  target="_blank" rel="noopener" >CentOS7 å‡çº§gccç‰ˆæœ¬åˆ°gcc9</a>
<code>source /opt/rh/devtoolset-9/enable</code></li>
<li><code>-static</code> é™æ€ç¼–è¯‘ï¼Œçœå»åŠ¨æ€é“¾æ¥ç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨</li>
</ul>
<h2 id="vim">vim</h2>
<ul>
<li>cmdæ¨¡å¼
<ul>
<li><code>:!cmd </code> execute a shell command from within Vim
<ul>
<li><code>!gcc %</code> ç¼–è¯‘</li>
<li><code>!xxd</code>  å°†å½“å‰æ–‡ä»¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶è¡¨ç¤ºå¹¶æ˜¾ç¤ºåœ¨ç»ˆç«¯ä¸­</li>
<li><code>%!xxd</code> å°†å½“å‰æ–‡ä»¶çš„å†…å®¹é€šè¿‡ç®¡é“ä¼ é€’ç»™å¤–éƒ¨å‘½ä»¤xxdï¼Œå¹¶å°†å…¶è¾“å‡ºæ›¿æ¢ä¸ºå½“å‰æ–‡ä»¶çš„å†…å®¹</li>
</ul>
</li>
<li><code>:set nu</code> æ˜¾ç¤ºè¡Œå·</li>
<li><code>:set wrap</code></li>
<li><code>:%!grep execve</code></li>
<li><code>:%! grep -v ENOENT</code></li>
<li><code>:%s/term/another_term/g </code> æ›¿æ¢</li>
</ul>
</li>
<li>visualæ¨¡å¼ æŒ‰vè¿›å…¥
<ul>
<li><code>y</code> å¤åˆ¶é€‰ä¸­å†…å®¹</li>
<li><code>d</code> åˆ é™¤</li>
</ul>
</li>
<li><code>u</code> undo</li>
<li></li>
</ul>
<h2 id="gdb">gdb</h2>
<ul>
<li>ç¼–è¯‘æ—¶è¦å¸¦<code>-g</code></li>
<li><code>bt</code> :but trace</li>
</ul>
<hr>
<h2 id="å‚è€ƒé“¾æ¥">å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://www.geeksforgeeks.org/cat-command-in-linux-with-examples/"  target="_blank" rel="noopener" >Cat command in Linux with examples</a></li>
<li><a href="https://blog.csdn.net/xunye_dream/article/details/108918316"  target="_blank" rel="noopener" >CentOS7 å‡çº§gccç‰ˆæœ¬åˆ°gcc9</a></li>
<li><a href="https://jyywiki.cn/OS/2022/"  target="_blank" rel="noopener" >æ“ä½œç³»ç»Ÿï¼šè®¾è®¡ä¸å®ç° (2022 æ˜¥å­£å­¦æœŸ)</a></li>
<li><a href="https://blog.csdn.net/lc013/article/details/103775702"  target="_blank" rel="noopener" >Linux å®šæ—¶æ‰§è¡Œshell è„šæœ¬</a></li>
<li><a href="https://www.geeksforgeeks.org/tar-command-linux-examples"  target="_blank" rel="noopener" >tar command in Linux with examples</a></li>
</ul>
]]></content:encoded>
    </item>
    
  </channel>
</rss>
